% generated by Ott 0.25 from: F:/Penn/Roles/Temp/corespec/spec/ett.ott
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{tmvar} ,\, \ottmv{x} ,\, \ottmv{y} ,\, \ottmv{f} ,\, \ottmv{m} ,\, \ottmv{n} $ & \ottcom{variables} \\
 $ \ottmv{covar} ,\, \ottmv{c} $ & \ottcom{coercion variables} \\
 $ \ottmv{datacon} ,\, \ottmv{K} $ &  \\
 $ \ottmv{const} ,\, \ottmv{T} ,\, \ottmv{F} $ &  \\
 $ \mathit{index} ,\, \mathit{i} $ & \ottcom{indices} \\
}}

\newcommand{\ottrole}{
\ottrulehead{\ottnt{role}  ,\ \ottnt{R}}{::=}{\ottcom{Role}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{Nom}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Rep}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{R_{{\mathrm{1}}}}  \cap  \ottnt{R_{{\mathrm{2}}}} } {\textsf{S}}{}{}{}}

\newcommand{\ottrelflag}{
\ottrulehead{\ottnt{relflag}  ,\ \rho}{::=}{\ottcom{relevance flag}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{+}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{-}}{}{}{}{}}

\newcommand{\ottconstraint}{
\ottrulehead{\ottnt{constraint}  ,\ \phi}{::=}{\ottcom{props}}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{b} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \phi  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\phi  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{|  \phi  |} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a}   \sim _{ \ottnt{R} }  \ottnt{b} } {\textsf{S}}{}{}{}}

\newcommand{\otttm}{
\ottrulehead{\ottnt{tm}  ,\ \ottnt{a}  ,\ \ottnt{b}  ,\ \ottnt{v}  ,\ \ottnt{w}  ,\ \ottnt{A}  ,\ \ottnt{B}}{::=}{\ottcom{types and kinds}}\ottprodnewline
\ottfirstprodline{|}{ \star }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\lambda}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} . \ottnt{b} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{b}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} . \ottnt{b} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{b}}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} \  \ottnt{b} ^{ \ottnt{R} , \rho } }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{F}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{B}}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} \triangleright _{ \ottnt{R} }  \gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall \ottmv{c} \!:\! \phi . \ottnt{B} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \ottnt{B}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Lambda} \ottmv{c} \!:\! \phi . \ottnt{b} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \ottnt{b}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Lambda} \ottmv{c} . \ottnt{b} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \ottnt{b}}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \ottsym{[}  \gamma  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Box}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{ifPath} \, \ottnt{R} \, \ottnt{a'} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{K}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{match} \, \ottnt{a} \, \ottkw{with} \, \ottnt{brs}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{sub} \, \ottnt{R} \, \ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \ottsym{\{}  \gamma  \ottsym{/}  \ottmv{c}  \ottsym{\}}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{a}  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} } {\textsf{S}}{}{}{\ottcom{parsing precedence is hard}}\ottprodnewline
\ottprodline{|}{ | \ottnt{a} |_{ \ottnt{R} } } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Int}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Bool}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Nat}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Vec}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{0}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{S} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{True}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Fix}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Age}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \to  \ottnt{b}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\phi  \Rightarrow  \ottnt{A}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{a} \  \ottnt{b} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda  \ottmv{x} . \ottnt{a} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda  \ottmv{x} \!:\! \ottnt{A} . \ottnt{a} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\forall \, \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}  \to  \ottnt{B}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \phi \, \ottkw{then} \, \ottnt{a} \, \ottkw{else} \, \ottnt{b}} {\textsf{S}}{}{}{}}

\newcommand{\ottbrs}{
\ottrulehead{\ottnt{brs}}{::=}{\ottcom{case branches}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{none}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{K}  \Rightarrow  \ottnt{a}  \ottsym{;}  \ottnt{brs}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{brs}  \ottsym{\{}  \ottnt{a}  \ottsym{/}  \ottmv{x}  \ottsym{\}}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{brs}  \ottsym{\{}  \gamma  \ottsym{/}  \ottmv{c}  \ottsym{\}}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{brs}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottco}{
\ottrulehead{\ottnt{co}  ,\ \gamma}{::=}{\ottcom{explicit coercions}}\ottprodnewline
\ottfirstprodline{|}{\bullet}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{red} \, \ottnt{a} \, \ottnt{b}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{refl} \, \ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ ( \ottnt{a} \mathrel{|\!\!=\!\!|}_{ \gamma } \ottnt{b} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{sym} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{{\mathrm{1}}}  \ottsym{;}  \gamma_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{sub} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Pi}^{ \ottnt{R} , \rho } \ottmv{x} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{2}}} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \gamma_{{\mathrm{2}}}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{2}}} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \gamma_{{\mathrm{2}}}}{}{}\ottprodnewline
\ottprodline{|}{ \gamma_{{\mathrm{1}}} \  \gamma_{{\mathrm{2}}} ^{ \ottnt{R} , \rho } }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{piFst} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{cpiFst} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{isoSnd} \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{{\mathrm{1}}}  \ottsym{@}  \gamma_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall \ottmv{c} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{3}}} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \gamma_{{\mathrm{3}}}}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\lambda} \ottmv{c} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{3}}} \ottsym{@} \gamma_{{\mathrm{4}}} }{}{\textsf{bind}\; \ottmv{c}\; \textsf{in}\; \gamma_{{\mathrm{3}}}}{}{}\ottprodnewline
\ottprodline{|}{\gamma  \ottsym{(}  \gamma_{{\mathrm{1}}}  \ottsym{,}  \gamma_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma   \ottsym{@}  ( \gamma_{{\mathrm{1}}}  \sim  \gamma_{{\mathrm{2}}} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma_{{\mathrm{1}}}   \triangleright _{ \ottnt{R} }  \gamma_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma_{{\mathrm{1}}}   \sim _{ \ottnt{A} }  \gamma_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottkw{conv} \  \phi_{{\mathrm{1}}} \sim_ \gamma   \phi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{eta} \, \ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{left} \, \gamma \, \gamma'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{right} \, \gamma \, \gamma'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \gamma  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma  \ottsym{\{}  \ottnt{a}  \ottsym{/}  \ottmv{x}  \ottsym{\}}} {\textsf{S}}{}{}{}}

\newcommand{\ottroleXXcontext}{
\ottrulehead{\ottnt{role\_context}  ,\ \Omega}{::=}{\ottcom{role_contexts}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Omega  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Omega } {\textsf{M}}{}{}{}}

\newcommand{\ottsigXXsort}{
\ottrulehead{\ottnt{sig\_sort}}{::=}{\ottcom{signature classifier}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R} }{}{}{}{}}

\newcommand{\ottsort}{
\ottrulehead{\ottnt{sort}}{::=}{\ottcom{binding classifier}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{Tm} \, \ottnt{A} \, \ottnt{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{Co} \, \phi}{}{}{}{}}

\newcommand{\ottcontext}{
\ottrulehead{\ottnt{context}  ,\ \Gamma}{::=}{\ottcom{contexts}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{\{}  \gamma  \ottsym{/}  \ottmv{c}  \ottsym{\}}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma ,  \Gamma' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{|  \Gamma  |} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Gamma  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma } {\textsf{M}}{}{}{}}

\newcommand{\ottsig}{
\ottrulehead{\ottnt{sig}  ,\ \Sigma}{::=}{\ottcom{signatures}}\ottprodnewline
\ottfirstprodline{|}{ \varnothing }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Sigma  \cup \{ \ottmv{F} \ottnt{sig\_sort} \} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Sigma_0 } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Sigma_1 } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{|  \Sigma  |} {\textsf{M}}{}{}{}}

\newcommand{\ottavailableXXprops}{
\ottrulehead{\ottnt{available\_props}  ,\ \Delta}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \varnothing }{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta  \ottsym{,}  \ottmv{c}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \widetilde { \Gamma } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \Delta  \ottsym{)}} {\textsf{M}}{}{}{}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \leftrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Leftrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{min} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \equiv }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \forall }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \in }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \not\in }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Leftarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Rightarrow^{\ast} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \to }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{\Lambda} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mapsfrom }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Box }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \dashv }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vDash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vDash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \neq }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \triangleright }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ \mathsf{ok} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \_ }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leadsto }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leadsto^{\ast} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \leadsto }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \varnothing }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \circ }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{fv}\! }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{dom} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \sim }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \asymp }{}{}{}{}\ottprodnewline
\ottprodline{|}{ | }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \bullet }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{fst}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{snd}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrel{|\Rightarrow|} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash_{=} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbf{refl_2} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathop{++} }{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}  ,\ \psi}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R} \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{:}  \ottnt{R} \, \in \, \Omega}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c}  \ottsym{:}  \phi \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{F} \, \ottnt{sig\_sort} \, \in \, \Sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{K}  \ottsym{:}  \ottmv{T} \, \Gamma \, \in \, \Sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x} \, \in \, \Delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c} \, \in \, \Delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c} \, \ottkw{not} \, \ottkw{relevant} \, \in \, \gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x} \, \not\in \, \mathsf{fv}\! \, \ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{x} \, \not\in \, \mathsf{dom} \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \emph{uniq}( \Omega ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c} \, \not\in \, \mathsf{dom} \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{T} \, \not\in \, \mathsf{dom} \, \Sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{F} \, \not\in \, \mathsf{dom} \, \Sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \ottsym{=}  \ottnt{b}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\phi_{{\mathrm{1}}}  \ottsym{=}  \phi_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma_{{\mathrm{1}}}  \ottsym{=}  \Gamma_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{{\mathrm{1}}}  \ottsym{=}  \gamma_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \neg  \psi }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \psi_{{\mathrm{1}}}  \wedge  \psi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \psi_{{\mathrm{1}}}  \vee  \psi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \psi_{{\mathrm{1}}}  \Rightarrow  \psi_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \psi  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \suppress{ \psi } }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{c}  \ottsym{:}  \ottsym{(a}  \ottsym{:}  \ottnt{A}  \sim  \ottnt{b}  \ottsym{:}  \ottsym{B)} \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{  }{}{}{}{\ottcom{suppress lc hypothesis generated by Ott}}}

\newcommand{\ottJSubRole}{
\ottrulehead{\ottnt{JSubRole}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }{}{}{}{\ottcom{Subroling judgement}}}

\newcommand{\ottJPath}{
\ottrulehead{\ottnt{JPath}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a}  =  \ottmv{F} }{}{}{}{\ottcom{Type headed by constant (partial function)}}}

\newcommand{\ottJValue}{
\ottrulehead{\ottnt{JValue}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{A} }{}{}{}{\ottcom{values}}}

\newcommand{\ottJValueType}{
\ottrulehead{\ottnt{JValueType}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{A} }{}{}{}{\ottcom{Types with head forms (erased language)}}}

\newcommand{\ottJconsistent}{
\ottrulehead{\ottnt{Jconsistent}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a}   \ottnt{b}  } }{}{}{}{\ottcom{(erased) types do not differ in their heads}}}

\newcommand{\ottJerased}{
\ottrulehead{\ottnt{Jerased}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }{}{}{}{}}

\newcommand{\ottJChk}{
\ottrulehead{\ottnt{JChk}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{A} ) }{}{}{}{\ottcom{irrelevant argument check}}}

\newcommand{\ottJpar}{
\ottrulehead{\ottnt{Jpar}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{b} }{}{}{}{\ottcom{parallel reduction (implicit language)}}\ottprodnewline
\ottprodline{|}{ \Omega   \vdash   \ottnt{a}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{b} }{}{}{}{\ottcom{multistep parallel reduction}}\ottprodnewline
\ottprodline{|}{ \Omega   \vdash   \ottnt{a}   \Leftrightarrow _ \ottnt{R}   \ottnt{b} }{}{}{}{\ottcom{parallel reduction to a common term}}}

\newcommand{\ottJbeta}{
\ottrulehead{\ottnt{Jbeta}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\vDash  \ottnt{a}  \ottsym{>}  \ottnt{b}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{primitive reductions on erased terms}}\ottprodnewline
\ottprodline{|}{\vDash  \ottnt{a}  \leadsto  \ottnt{b}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{single-step head reduction for implicit language}}\ottprodnewline
\ottprodline{|}{\vDash  \ottnt{a}  \leadsto^{\ast}  \ottnt{b}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{multistep reduction}}}

\newcommand{\ottJett}{
\ottrulehead{\ottnt{Jett}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vDash  \phi \, \ \mathsf{ok}}{}{}{}{\ottcom{Prop wellformedness}}\ottprodnewline
\ottprodline{|}{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{typing}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{;}  \Delta  \vDash  \phi_{{\mathrm{1}}}  \equiv  \phi_{{\mathrm{2}}}}{}{}{}{\ottcom{prop equality}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{definitional equality}}\ottprodnewline
\ottprodline{|}{\vDash  \Gamma}{}{}{}{\ottcom{context wellformedness}}}

\newcommand{\ottJsig}{
\ottrulehead{\ottnt{Jsig}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\vDash  \Sigma}{}{}{}{\ottcom{signature wellformedness}}}

\newcommand{\ottJann}{
\ottrulehead{\ottnt{Jann}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vdash  \phi \, \ \mathsf{ok}}{}{}{}{\ottcom{prop wellformedness}}\ottprodnewline
\ottprodline{|}{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{typing}}\ottprodnewline
\ottprodline{|}{ \Gamma ; \Delta \vdash   \gamma  :  \phi_{{\mathrm{1}}}  \sim  \phi_{{\mathrm{2}}} }{}{}{}{\ottcom{coercion between props}}\ottprodnewline
\ottprodline{|}{ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B} }{}{}{}{\ottcom{coercion between types}}\ottprodnewline
\ottprodline{|}{\vdash  \Gamma}{}{}{}{\ottcom{context wellformedness}}\ottprodnewline
\ottprodline{|}{\vdash  \Sigma}{}{}{}{\ottcom{signature wellformedness}}}

\newcommand{\ottJred}{
\ottrulehead{\ottnt{Jred}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma  \vdash  \ottnt{a}  \leadsto  \ottnt{b}  \ottsym{/}  \ottnt{R}}{}{}{}{\ottcom{single-step, weak head reduction to
   values for annotated language}}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{JSubRole}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JPath}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JValue}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JValueType}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jconsistent}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jerased}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{JChk}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jpar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jbeta}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jett}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jsig}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jann}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jred}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{tmvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{covar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{datacon}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{const}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{index}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{role}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{relflag}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{constraint}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{tm}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{brs}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{co}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{role\_context}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{sig\_sort}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{sort}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{context}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{sig}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{available\_props}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottrole\ottinterrule
\ottrelflag\ottinterrule
\ottconstraint\ottinterrule
\otttm\ottinterrule
\ottbrs\ottinterrule
\ottco\ottinterrule
\ottroleXXcontext\ottinterrule
\ottsigXXsort\ottinterrule
\ottsort\ottinterrule
\ottcontext\ottinterrule
\ottsig\ottinterrule
\ottavailableXXprops\ottinterrule
\ottterminals\ottinterrule
\ottformula\ottinterrule
\ottJSubRole\ottinterrule
\ottJPath\ottinterrule
\ottJValue\ottinterrule
\ottJValueType\ottinterrule
\ottJconsistent\ottinterrule
\ottJerased\ottinterrule
\ottJChk\ottinterrule
\ottJpar\ottinterrule
\ottJbeta\ottinterrule
\ottJett\ottinterrule
\ottJsig\ottinterrule
\ottJann\ottinterrule
\ottJred\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns JSubRole
%% defn SubRole
\newcommand{\ottdruleNomBot}[1]{\ottdrule[#1]{%
}{
 \ottkw{Nom}  \leq  \ottnt{R} }{%
{\ottdrulename{NomBot}}{}%
}}


\newcommand{\ottdruleRepTop}[1]{\ottdrule[#1]{%
}{
 \ottnt{R}  \leq  \ottkw{Rep} }{%
{\ottdrulename{RepTop}}{}%
}}


\newcommand{\ottdruleRefl}[1]{\ottdrule[#1]{%
}{
 \ottnt{R}  \leq  \ottnt{R} }{%
{\ottdrulename{Refl}}{}%
}}


\newcommand{\ottdruleTrans}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }%
\ottpremise{ \ottnt{R_{{\mathrm{2}}}}  \leq  \ottnt{R_{{\mathrm{3}}}} }%
}{
 \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{3}}}} }{%
{\ottdrulename{Trans}}{}%
}}

\newcommand{\ottdefnSubRole}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} $}{\ottcom{Subroling judgement}}
\ottusedrule{\ottdruleNomBot{}}
\ottusedrule{\ottdruleRepTop{}}
\ottusedrule{\ottdruleRefl{}}
\ottusedrule{\ottdruleTrans{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSubRole}{
\ottdefnSubRole{}}

% defns JPath
%% defn Path
\newcommand{\ottdrulePathXXConst}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R_{{\mathrm{1}}}}  \, \in \,  \Sigma_0 }%
\ottpremise{ \neg  \ottsym{(}   \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R}   \ottsym{)} }%
}{
 \mathsf{Path}_{ \ottnt{R} }\  \ottmv{F}  =  \ottmv{F} }{%
{\ottdrulename{Path\_Const}}{}%
}}


\newcommand{\ottdrulePathXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a}  =  \ottmv{F} }%
}{
 \mathsf{Path}_{ \ottnt{R} }\  \ottsym{(}   \ottnt{a} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} , \rho }   \ottsym{)}  =  \ottmv{F} }{%
{\ottdrulename{Path\_App}}{}%
}}


\newcommand{\ottdrulePathXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a}  =  \ottmv{F} }%
}{
 \mathsf{Path}_{ \ottnt{R} }\  \ottsym{(}  \ottnt{a}  \ottsym{[}  \bullet  \ottsym{]}  \ottsym{)}  =  \ottmv{F} }{%
{\ottdrulename{Path\_CApp}}{}%
}}

\newcommand{\ottdefnPath}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a}  =  \ottmv{F} $}{\ottcom{Type headed by constant (partial function)}}
\ottusedrule{\ottdrulePathXXConst{}}
\ottusedrule{\ottdrulePathXXApp{}}
\ottusedrule{\ottdrulePathXXCApp{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJPath}{
\ottdefnPath{}}

% defns JValue
%% defn Value
\newcommand{\ottdruleValueXXStar}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \star  }{%
{\ottdrulename{Value\_Star}}{}%
}}


\newcommand{\ottdruleValueXXPi}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}  }{%
{\ottdrulename{Value\_Pi}}{}%
}}


\newcommand{\ottdruleValueXXCPi}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \forall \ottmv{c} \!:\! \phi . \ottnt{B}  }{%
{\ottdrulename{Value\_CPi}}{}%
}}


\newcommand{\ottdruleValueXXAbsRel}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\lambda}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} . \ottnt{a}  }{%
{\ottdrulename{Value\_AbsRel}}{}%
}}


\newcommand{\ottdruleValueXXUAbsRel}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\lambda}^{ \ottnt{R_{{\mathrm{1}}}} , \ottsym{+} } \ottmv{x} . \ottnt{a}  }{%
{\ottdrulename{Value\_UAbsRel}}{}%
}}


\newcommand{\ottdruleValueXXUAbsIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{a} }%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\lambda}^{ \ottnt{R_{{\mathrm{1}}}} , \ottsym{-} } \ottmv{x} . \ottnt{a}  }{%
{\ottdrulename{Value\_UAbsIrrel}}{}%
}}


\newcommand{\ottdruleValueXXCAbs}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\Lambda} \ottmv{c} \!:\! \phi . \ottnt{a}  }{%
{\ottdrulename{Value\_CAbs}}{}%
}}


\newcommand{\ottdruleValueXXUCAbs}[1]{\ottdrule[#1]{%
}{
 \mathsf{Value}_{ \ottnt{R} }\   \mathrm{\Lambda} \ottmv{c} . \ottnt{a}  }{%
{\ottdrulename{Value\_UCAbs}}{}%
}}


\newcommand{\ottdruleValueXXPath}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a}  =  \ottmv{F} }%
}{
 \mathsf{Value}_{ \ottnt{R} }\  \ottnt{a} }{%
{\ottdrulename{Value\_Path}}{}%
}}

\newcommand{\ottdefnValue}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{A} $}{\ottcom{values}}
\ottusedrule{\ottdruleValueXXStar{}}
\ottusedrule{\ottdruleValueXXPi{}}
\ottusedrule{\ottdruleValueXXCPi{}}
\ottusedrule{\ottdruleValueXXAbsRel{}}
\ottusedrule{\ottdruleValueXXUAbsRel{}}
\ottusedrule{\ottdruleValueXXUAbsIrrel{}}
\ottusedrule{\ottdruleValueXXCAbs{}}
\ottusedrule{\ottdruleValueXXUCAbs{}}
\ottusedrule{\ottdruleValueXXPath{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJValue}{
\ottdefnValue{}}

% defns JValueType
%% defn value_type
\newcommand{\ottdrulevalueXXtypeXXStar}[1]{\ottdrule[#1]{%
}{
 \mathsf{ValueType}_{ \ottnt{R} }\   \star  }{%
{\ottdrulename{value\_type\_Star}}{}%
}}


\newcommand{\ottdrulevalueXXtypeXXPi}[1]{\ottdrule[#1]{%
}{
 \mathsf{ValueType}_{ \ottnt{R} }\   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}  }{%
{\ottdrulename{value\_type\_Pi}}{}%
}}


\newcommand{\ottdrulevalueXXtypeXXCPi}[1]{\ottdrule[#1]{%
}{
 \mathsf{ValueType}_{ \ottnt{R} }\   \forall \ottmv{c} \!:\! \phi . \ottnt{B}  }{%
{\ottdrulename{value\_type\_CPi}}{}%
}}


\newcommand{\ottdrulevalueXXtypeXXPath}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{A}  =  \ottmv{F} }%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{A} }%
}{
 \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{A} }{%
{\ottdrulename{value\_type\_Path}}{}%
}}

\newcommand{\ottdefnvalueXXtype}[1]{\begin{ottdefnblock}[#1]{$ \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{A} $}{\ottcom{Types with head forms (erased language)}}
\ottusedrule{\ottdrulevalueXXtypeXXStar{}}
\ottusedrule{\ottdrulevalueXXtypeXXPi{}}
\ottusedrule{\ottdrulevalueXXtypeXXCPi{}}
\ottusedrule{\ottdrulevalueXXtypeXXPath{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJValueType}{
\ottdefnvalueXXtype{}}

% defns Jconsistent
%% defn consistent
\newcommand{\ottdruleconsistentXXaXXStar}[1]{\ottdrule[#1]{%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\   \star     \star   } }{%
{\ottdrulename{consistent\_a\_Star}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXPi}[1]{\ottdrule[#1]{%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R'} }\  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x_{{\mathrm{1}}}} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \ottsym{)}   \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x_{{\mathrm{2}}}} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{)}  } }{%
{\ottdrulename{consistent\_a\_Pi}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXCPi}[1]{\ottdrule[#1]{%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottsym{(}   \forall \ottmv{c_{{\mathrm{1}}}} \!:\! \phi_{{\mathrm{1}}} . \ottnt{A_{{\mathrm{1}}}}   \ottsym{)}   \ottsym{(}   \forall \ottmv{c_{{\mathrm{2}}}} \!:\! \phi_{{\mathrm{2}}} . \ottnt{A_{{\mathrm{2}}}}   \ottsym{)}  } }{%
{\ottdrulename{consistent\_a\_CPi}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXPath}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a_{{\mathrm{1}}}}  =  \ottmv{F} }%
\ottpremise{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a_{{\mathrm{2}}}}  =  \ottmv{F} }%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a_{{\mathrm{1}}}}   \ottnt{a_{{\mathrm{2}}}}  } }{%
{\ottdrulename{consistent\_a\_Path}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXStepXXR}[1]{\ottdrule[#1]{%
\ottpremise{ \neg   \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{b}  }%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a}   \ottnt{b}  } }{%
{\ottdrulename{consistent\_a\_Step\_R}}{}%
}}


\newcommand{\ottdruleconsistentXXaXXStepXXL}[1]{\ottdrule[#1]{%
\ottpremise{ \neg   \mathsf{ValueType}_{ \ottnt{R} }\  \ottnt{a}  }%
}{
 \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a}   \ottnt{b}  } }{%
{\ottdrulename{consistent\_a\_Step\_L}}{}%
}}

\newcommand{\ottdefnconsistent}[1]{\begin{ottdefnblock}[#1]{$ \suppress{\mathsf{consistent}_{ \ottnt{R} }\  \ottnt{a}   \ottnt{b}  } $}{\ottcom{(erased) types do not differ in their heads}}
\ottusedrule{\ottdruleconsistentXXaXXStar{}}
\ottusedrule{\ottdruleconsistentXXaXXPi{}}
\ottusedrule{\ottdruleconsistentXXaXXCPi{}}
\ottusedrule{\ottdruleconsistentXXaXXPath{}}
\ottusedrule{\ottdruleconsistentXXaXXStepXXR{}}
\ottusedrule{\ottdruleconsistentXXaXXStepXXL{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJconsistent}{
\ottdefnconsistent{}}

% defns Jerased
%% defn erased_tm
\newcommand{\ottdruleerasedXXaXXBullet}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
}{
 \Omega  \vDash  \Box  :  \ottnt{R} }{%
{\ottdrulename{erased\_a\_Bullet}}{}%
}}


\newcommand{\ottdruleerasedXXaXXStar}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
}{
 \Omega  \vDash   \star   :  \ottnt{R} }{%
{\ottdrulename{erased\_a\_Star}}{}%
}}


\newcommand{\ottdruleerasedXXaXXVar}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{R} \, \in \, \Omega}%
\ottpremise{ \ottnt{R}  \leq  \ottnt{R_{{\mathrm{1}}}} }%
}{
 \Omega  \vDash  \ottmv{x}  :  \ottnt{R_{{\mathrm{1}}}} }{%
{\ottdrulename{erased\_a\_Var}}{}%
}}


\newcommand{\ottdruleerasedXXaXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{R_{{\mathrm{1}}}}  \vDash  \ottnt{a}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \mathrm{\lambda}^{ \ottnt{R_{{\mathrm{1}}}} , \rho } \ottmv{x} . \ottnt{a}   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{erased\_a\_Abs}}{}%
}}


\newcommand{\ottdruleerasedXXaXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}  :  \ottnt{R_{{\mathrm{1}}}} }%
}{
 \Omega  \vDash  \ottsym{(}   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} , \rho }   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{erased\_a\_App}}{}%
}}


\newcommand{\ottdruleerasedXXaXXPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{A}  :  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{R_{{\mathrm{1}}}}  \vDash  \ottnt{B}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{erased\_a\_Pi}}{}%
}}


\newcommand{\ottdruleerasedXXaXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}  :  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{A}  :  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{B}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \forall \ottmv{c} \!:\!  \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  . \ottnt{B}   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{erased\_a\_CPi}}{}%
}}


\newcommand{\ottdruleerasedXXaXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{b}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{b}   \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{erased\_a\_CAbs}}{}%
}}


\newcommand{\ottdruleerasedXXaXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottsym{(}  \ottnt{a}  \ottsym{[}  \bullet  \ottsym{]}  \ottsym{)}  :  \ottnt{R} }{%
{\ottdrulename{erased\_a\_CApp}}{}%
}}


\newcommand{\ottdruleerasedXXaXXFam}[1]{\ottdrule[#1]{%
\ottpremise{ \emph{uniq}( \Omega ) }%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R}  \, \in \,  \Sigma_0 }%
}{
 \Omega  \vDash  \ottmv{F}  :  \ottnt{R_{{\mathrm{1}}}} }{%
{\ottdrulename{erased\_a\_Fam}}{}%
}}


\newcommand{\ottdruleerasedXXaXXPattern}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a_{{\mathrm{0}}}}  :  \ottnt{A}  /  \ottnt{R'}  \, \in \,  \Sigma_0 }%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{1}}}}  :  \ottnt{R_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{2}}}}  :  \ottnt{R_{{\mathrm{1}}}} }%
}{
 \Omega  \vDash  \ottsym{(}  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}  \ottsym{)}  :  \ottnt{R_{{\mathrm{1}}}} }{%
{\ottdrulename{erased\_a\_Pattern}}{}%
}}

\newcommand{\ottdefnerasedXXtm}[1]{\begin{ottdefnblock}[#1]{$ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} $}{}
\ottusedrule{\ottdruleerasedXXaXXBullet{}}
\ottusedrule{\ottdruleerasedXXaXXStar{}}
\ottusedrule{\ottdruleerasedXXaXXVar{}}
\ottusedrule{\ottdruleerasedXXaXXAbs{}}
\ottusedrule{\ottdruleerasedXXaXXApp{}}
\ottusedrule{\ottdruleerasedXXaXXPi{}}
\ottusedrule{\ottdruleerasedXXaXXCPi{}}
\ottusedrule{\ottdruleerasedXXaXXCAbs{}}
\ottusedrule{\ottdruleerasedXXaXXCApp{}}
\ottusedrule{\ottdruleerasedXXaXXFam{}}
\ottusedrule{\ottdruleerasedXXaXXPattern{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJerased}{
\ottdefnerasedXXtm{}}

% defns JChk
%% defn RhoCheck
\newcommand{\ottdruleRhoXXRel}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
 ( \ottsym{+}  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{A} ) }{%
{\ottdrulename{Rho\_Rel}}{}%
}}


\newcommand{\ottdruleRhoXXIrrRel}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{x} \, \not\in \, \mathsf{fv}\! \, \ottnt{A}}%
}{
 ( \ottsym{-}  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{A} ) }{%
{\ottdrulename{Rho\_IrrRel}}{}%
}}

\newcommand{\ottdefnRhoCheck}[1]{\begin{ottdefnblock}[#1]{$ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{A} ) $}{\ottcom{irrelevant argument check}}
\ottusedrule{\ottdruleRhoXXRel{}}
\ottusedrule{\ottdruleRhoXXIrrRel{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJChk}{
\ottdefnRhoCheck{}}

% defns Jpar
%% defn Par
\newcommand{\ottdruleParXXRefl}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}  :  \ottnt{R} }%
}{
 \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a} }{%
{\ottdrulename{Par\_Refl}}{}%
}}


\newcommand{\ottdruleParXXBeta}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottsym{(}   \mathrm{\lambda}^{ \ottnt{R_{{\mathrm{1}}}} , \rho } \ottmv{x} . \ottnt{a'}   \ottsym{)} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}   \Rightarrow _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'} }%
}{
 \Omega  \vDash   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} , \rho }    \Rightarrow _{ \ottnt{R} }  \ottnt{a'}  \ottsym{\{}  \ottnt{b'}  \ottsym{/}  \ottmv{x}  \ottsym{\}} }{%
{\ottdrulename{Par\_Beta}}{}%
}}


\newcommand{\ottdruleParXXApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}   \Rightarrow _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'} }%
}{
 \Omega  \vDash   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} , \rho }    \Rightarrow _{ \ottnt{R} }   \ottnt{a'} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} , \rho }  }{%
{\ottdrulename{Par\_App}}{}%
}}


\newcommand{\ottdruleParXXCBeta}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{a'}   \ottsym{)} }%
}{
 \Omega  \vDash  \ottnt{a}  \ottsym{[}  \bullet  \ottsym{]}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'}  \ottsym{\{}  \bullet  \ottsym{/}  \ottmv{c}  \ottsym{\}} }{%
{\ottdrulename{Par\_CBeta}}{}%
}}


\newcommand{\ottdruleParXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
}{
 \Omega  \vDash  \ottnt{a}  \ottsym{[}  \bullet  \ottsym{]}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'}  \ottsym{[}  \bullet  \ottsym{]} }{%
{\ottdrulename{Par\_CApp}}{}%
}}


\newcommand{\ottdruleParXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{R_{{\mathrm{1}}}}  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
}{
 \Omega  \vDash   \mathrm{\lambda}^{ \ottnt{R_{{\mathrm{1}}}} , \rho } \ottmv{x} . \ottnt{a}    \Rightarrow _{ \ottnt{R} }   \mathrm{\lambda}^{ \ottnt{R_{{\mathrm{1}}}} , \rho } \ottmv{x} . \ottnt{a'}  }{%
{\ottdrulename{Par\_Abs}}{}%
}}


\newcommand{\ottdruleParXXPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{A}   \Rightarrow _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{A'} }%
\ottpremise{ \Omega  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{R_{{\mathrm{1}}}}  \vDash  \ottnt{B}   \Rightarrow _{ \ottnt{R} }  \ottnt{B'} }%
}{
 \Omega  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}    \Rightarrow _{ \ottnt{R} }   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A'} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B'}  }{%
{\ottdrulename{Par\_Pi}}{}%
}}


\newcommand{\ottdruleParXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
}{
 \Omega  \vDash   \mathrm{\Lambda} \ottmv{c} . \ottnt{a}    \Rightarrow _{ \ottnt{R} }   \mathrm{\Lambda} \ottmv{c} . \ottnt{a'}  }{%
{\ottdrulename{Par\_CAbs}}{}%
}}


\newcommand{\ottdruleParXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{A}   \Rightarrow _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{A'} }%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b}   \Rightarrow _{ \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'} }%
\ottpremise{ \Omega  \vDash  \ottnt{B}   \Rightarrow _{ \ottnt{R} }  \ottnt{B'} }%
}{
 \Omega  \vDash   \forall \ottmv{c} \!:\!  \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}  . \ottnt{B}    \Rightarrow _{ \ottnt{R} }   \forall \ottmv{c} \!:\!  \ottnt{a'}   \sim _{ \ottnt{A'} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'}  . \ottnt{B'}  }{%
{\ottdrulename{Par\_CPi}}{}%
}}


\newcommand{\ottdruleParXXAxiom}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R_{{\mathrm{1}}}}  \, \in \,  \Sigma_0 }%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R} }%
\ottpremise{ \emph{uniq}( \Omega ) }%
}{
 \Omega  \vDash  \ottmv{F}   \Rightarrow _{ \ottnt{R} }  \ottnt{a} }{%
{\ottdrulename{Par\_Axiom}}{}%
}}


\newcommand{\ottdruleParXXPattern}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a_{{\mathrm{0}}}}  :  \ottnt{A}  /  \ottnt{R'}  \, \in \,  \Sigma_0 }%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{1}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}} }%
}{
 \Omega  \vDash  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a'} \, \ottnt{b'_{{\mathrm{1}}}} \, \ottnt{b'_{{\mathrm{2}}}} }{%
{\ottdrulename{Par\_Pattern}}{}%
}}


\newcommand{\ottdruleParXXPatternTrue}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{1}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}} }%
\ottpremise{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a'}  =  \ottmv{F} }%
}{
 \Omega  \vDash  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{1}}}} }{%
{\ottdrulename{Par\_PatternTrue}}{}%
}}


\newcommand{\ottdruleParXXPatternFalse}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a_{{\mathrm{0}}}}  :  \ottnt{A}  /  \ottnt{R'}  \, \in \,  \Sigma_0 }%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{a'} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{1}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{1}}}} }%
\ottpremise{ \Omega  \vDash  \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}} }%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{a'} }%
\ottpremise{ \neg  \ottsym{(}   \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a'}  =  \ottmv{F}   \ottsym{)} }%
}{
 \Omega  \vDash  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}   \Rightarrow _{ \ottnt{R_{{\mathrm{0}}}} }  \ottnt{b'_{{\mathrm{2}}}} }{%
{\ottdrulename{Par\_PatternFalse}}{}%
}}

\newcommand{\ottdefnPar}[1]{\begin{ottdefnblock}[#1]{$ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{b} $}{\ottcom{parallel reduction (implicit language)}}
\ottusedrule{\ottdruleParXXRefl{}}
\ottusedrule{\ottdruleParXXBeta{}}
\ottusedrule{\ottdruleParXXApp{}}
\ottusedrule{\ottdruleParXXCBeta{}}
\ottusedrule{\ottdruleParXXCApp{}}
\ottusedrule{\ottdruleParXXAbs{}}
\ottusedrule{\ottdruleParXXPi{}}
\ottusedrule{\ottdruleParXXCAbs{}}
\ottusedrule{\ottdruleParXXCPi{}}
\ottusedrule{\ottdruleParXXAxiom{}}
\ottusedrule{\ottdruleParXXPattern{}}
\ottusedrule{\ottdruleParXXPatternTrue{}}
\ottusedrule{\ottdruleParXXPatternFalse{}}
\end{ottdefnblock}}

%% defn MultiPar
\newcommand{\ottdruleMPXXRefl}[1]{\ottdrule[#1]{%
}{
 \Omega   \vdash   \ottnt{a}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{a} }{%
{\ottdrulename{MP\_Refl}}{}%
}}


\newcommand{\ottdruleMPXXStep}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega  \vDash  \ottnt{a}   \Rightarrow _{ \ottnt{R} }  \ottnt{b} }%
\ottpremise{ \Omega   \vdash   \ottnt{b}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{a'} }%
}{
 \Omega   \vdash   \ottnt{a}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{a'} }{%
{\ottdrulename{MP\_Step}}{}%
}}

\newcommand{\ottdefnMultiPar}[1]{\begin{ottdefnblock}[#1]{$ \Omega   \vdash   \ottnt{a}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{b} $}{\ottcom{multistep parallel reduction}}
\ottusedrule{\ottdruleMPXXRefl{}}
\ottusedrule{\ottdruleMPXXStep{}}
\end{ottdefnblock}}

%% defn joins
\newcommand{\ottdrulejoin}[1]{\ottdrule[#1]{%
\ottpremise{ \Omega   \vdash   \ottnt{a_{{\mathrm{1}}}}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{b} }%
\ottpremise{ \Omega   \vdash   \ottnt{a_{{\mathrm{2}}}}   \Rightarrow^{\ast} _ \ottnt{R}   \ottnt{b} }%
}{
 \Omega   \vdash   \ottnt{a_{{\mathrm{1}}}}   \Leftrightarrow _ \ottnt{R}   \ottnt{a_{{\mathrm{2}}}} }{%
{\ottdrulename{join}}{}%
}}

\newcommand{\ottdefnjoins}[1]{\begin{ottdefnblock}[#1]{$ \Omega   \vdash   \ottnt{a}   \Leftrightarrow _ \ottnt{R}   \ottnt{b} $}{\ottcom{parallel reduction to a common term}}
\ottusedrule{\ottdrulejoin{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJpar}{
\ottdefnPar{}\ottdefnMultiPar{}\ottdefnjoins{}}

% defns Jbeta
%% defn Beta
\newcommand{\ottdruleBetaXXAppAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottnt{R_{{\mathrm{1}}}} }\  \ottsym{(}   \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} . \ottnt{v}   \ottsym{)} }%
}{
\vDash   \ottsym{(}   \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} . \ottnt{v}   \ottsym{)} \  \ottnt{b} ^{ \ottnt{R} , \rho }   \ottsym{>}  \ottnt{v}  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{Beta\_AppAbs}}{}%
}}


\newcommand{\ottdruleBetaXXCAppCAbs}[1]{\ottdrule[#1]{%
}{
\vDash  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{a'}   \ottsym{)}  \ottsym{[}  \bullet  \ottsym{]}  \ottsym{>}  \ottnt{a'}  \ottsym{\{}  \bullet  \ottsym{/}  \ottmv{c}  \ottsym{\}}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{Beta\_CAppCAbs}}{}%
}}


\newcommand{\ottdruleBetaXXAxiom}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R}  \, \in \,  \Sigma_0 }%
\ottpremise{ \ottnt{R}  \leq  \ottnt{R_{{\mathrm{1}}}} }%
}{
\vDash  \ottmv{F}  \ottsym{>}  \ottnt{a}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{Beta\_Axiom}}{}%
}}


\newcommand{\ottdruleBetaXXPatternTrue}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a}  =  \ottmv{F} }%
}{
\vDash  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}  \ottsym{>}  \ottnt{b_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}{%
{\ottdrulename{Beta\_PatternTrue}}{}%
}}


\newcommand{\ottdruleBetaXXPatternFalse}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a_{{\mathrm{0}}}}  :  \ottnt{A}  /  \ottnt{R'}  \, \in \,  \Sigma_0 }%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{a} }%
\ottpremise{ \neg  \ottsym{(}   \mathsf{Path}_{ \ottnt{R} }\  \ottnt{a}  =  \ottmv{F}   \ottsym{)} }%
}{
\vDash  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}  \ottsym{>}  \ottnt{b_{{\mathrm{2}}}}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}{%
{\ottdrulename{Beta\_PatternFalse}}{}%
}}

\newcommand{\ottdefnBeta}[1]{\begin{ottdefnblock}[#1]{$\vDash  \ottnt{a}  \ottsym{>}  \ottnt{b}  \ottsym{/}  \ottnt{R}$}{\ottcom{primitive reductions on erased terms}}
\ottusedrule{\ottdruleBetaXXAppAbs{}}
\ottusedrule{\ottdruleBetaXXCAppCAbs{}}
\ottusedrule{\ottdruleBetaXXAxiom{}}
\ottusedrule{\ottdruleBetaXXPatternTrue{}}
\ottusedrule{\ottdruleBetaXXPatternFalse{}}
\end{ottdefnblock}}

%% defn reduction_in_one
\newcommand{\ottdruleEXXAbsTerm}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
}{
\vDash   \mathrm{\lambda}^{ \ottnt{R} , \ottsym{-} } \ottmv{x} . \ottnt{a}   \leadsto   \mathrm{\lambda}^{ \ottnt{R} , \ottsym{-} } \ottmv{x} . \ottnt{a'}   \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{E\_AbsTerm}}{}%
}}


\newcommand{\ottdruleEXXAppLeft}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
}{
\vDash   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R} , \rho }   \leadsto   \ottnt{a'} \  \ottnt{b} ^{ \ottnt{R} , \rho }   \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{E\_AppLeft}}{}%
}}


\newcommand{\ottdruleEXXCAppLeft}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{/}  \ottnt{R}}%
}{
\vDash  \ottnt{a}  \ottsym{[}  \bullet  \ottsym{]}  \leadsto  \ottnt{a'}  \ottsym{[}  \bullet  \ottsym{]}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_CAppLeft}}{}%
}}


\newcommand{\ottdruleEXXPattern}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{/}  \ottnt{R}}%
}{
\vDash  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}  \leadsto  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a'} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}{%
{\ottdrulename{E\_Pattern}}{}%
}}


\newcommand{\ottdruleEXXPrim}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \ottnt{a}  \ottsym{>}  \ottnt{b}  \ottsym{/}  \ottnt{R}}%
}{
\vDash  \ottnt{a}  \leadsto  \ottnt{b}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Prim}}{}%
}}

\newcommand{\ottdefnreductionXXinXXone}[1]{\begin{ottdefnblock}[#1]{$\vDash  \ottnt{a}  \leadsto  \ottnt{b}  \ottsym{/}  \ottnt{R}$}{\ottcom{single-step head reduction for implicit language}}
\ottusedrule{\ottdruleEXXAbsTerm{}}
\ottusedrule{\ottdruleEXXAppLeft{}}
\ottusedrule{\ottdruleEXXCAppLeft{}}
\ottusedrule{\ottdruleEXXPattern{}}
\ottusedrule{\ottdruleEXXPrim{}}
\end{ottdefnblock}}

%% defn reduction
\newcommand{\ottdruleEqual}[1]{\ottdrule[#1]{%
}{
\vDash  \ottnt{a}  \leadsto^{\ast}  \ottnt{a}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{Equal}}{}%
}}


\newcommand{\ottdruleStep}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \ottnt{a}  \leadsto  \ottnt{b}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\vDash  \ottnt{b}  \leadsto^{\ast}  \ottnt{a'}  \ottsym{/}  \ottnt{R}}%
}{
\vDash  \ottnt{a}  \leadsto^{\ast}  \ottnt{a'}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{Step}}{}%
}}

\newcommand{\ottdefnreduction}[1]{\begin{ottdefnblock}[#1]{$\vDash  \ottnt{a}  \leadsto^{\ast}  \ottnt{b}  \ottsym{/}  \ottnt{R}$}{\ottcom{multistep reduction}}
\ottusedrule{\ottdruleEqual{}}
\ottusedrule{\ottdruleStep{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJbeta}{
\ottdefnBeta{}\ottdefnreductionXXinXXone{}\ottdefnreduction{}}

% defns Jett
%% defn PropWff
\newcommand{\ottdruleEXXWff}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R} } }%
}{
\Gamma  \vDash   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{b}  \, \ \mathsf{ok}}{%
{\ottdrulename{E\_Wff}}{}%
}}

\newcommand{\ottdefnPropWff}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vDash  \phi \, \ \mathsf{ok}$}{\ottcom{Prop wellformedness}}
\ottusedrule{\ottdruleEXXWff{}}
\end{ottdefnblock}}

%% defn Typing
\newcommand{\ottdruleEXXSubRole}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
}{
\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{2}}}}}{%
{\ottdrulename{E\_SubRole}}{}%
}}


\newcommand{\ottdruleEXXStar}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
}{
\Gamma  \vDash   \star   \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Star}}{}%
}}


\newcommand{\ottdruleEXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R} \, \in \, \Gamma}%
}{
\Gamma  \vDash  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Var}}{}%
}}


\newcommand{\ottdruleEXXPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}  \vDash  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R} } }%
}{
\Gamma  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_Pi}}{}%
}}


\newcommand{\ottdruleEXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R} } }%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{a} ) }%
}{
\Gamma  \vDash   \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} . \ottnt{a}   \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_Abs}}{}%
}}


\newcommand{\ottdruleEXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vDash   \ottnt{b} \  \ottnt{a} ^{ \ottnt{R} , \ottsym{+} }   \ottsym{:}  \ottnt{B}  \ottsym{\{}  \ottnt{a}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_App}}{}%
}}


\newcommand{\ottdruleEXXIApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vDash   \ottnt{b} \  \Box ^{ \ottnt{R} , \ottsym{-} }   \ottsym{:}  \ottnt{B}  \ottsym{\{}  \ottnt{a}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_IApp}}{}%
}}


\newcommand{\ottdruleEXXConv}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{A}  \equiv  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottkw{Rep}}%
\ottpremise{\Gamma  \vDash  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Conv}}{}%
}}


\newcommand{\ottdruleEXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi  \vDash  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \phi \, \ \mathsf{ok} } }%
}{
\Gamma  \vDash   \forall \ottmv{c} \!:\! \phi . \ottnt{B}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_CPi}}{}%
}}


\newcommand{\ottdruleEXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \phi \, \ \mathsf{ok} } }%
}{
\Gamma  \vDash   \mathrm{\Lambda} \ottmv{c} . \ottnt{a}   \ottsym{:}   \forall \ottmv{c} \!:\! \phi . \ottnt{B}   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_CAbs}}{}%
}}


\newcommand{\ottdruleEXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{b}   \ottsym{)} . \ottnt{B_{{\mathrm{1}}}}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vDash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{[}  \bullet  \ottsym{]}  \ottsym{:}  \ottnt{B_{{\mathrm{1}}}}  \ottsym{\{}  \bullet  \ottsym{/}  \ottmv{c}  \ottsym{\}}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_CApp}}{}%
}}


\newcommand{\ottdruleEXXFam}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R}  \, \in \,  \Sigma_0 }%
\ottpremise{\varnothing  \vDash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
}{
\Gamma  \vDash  \ottmv{F}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{E\_Fam}}{}%
}}


\newcommand{\ottdruleEXXPat}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a_{{\mathrm{0}}}}  :  \ottnt{A_{{\mathrm{0}}}}  /  \ottnt{R'}  \, \in \,  \Sigma_0 }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vDash  \ottnt{b_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}%
\ottpremise{\Gamma  \vDash  \ottnt{b_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}%
}{
\Gamma  \vDash  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}{%
{\ottdrulename{E\_Pat}}{}%
}}

\newcommand{\ottdefnTyping}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}$}{\ottcom{typing}}
\ottusedrule{\ottdruleEXXSubRole{}}
\ottusedrule{\ottdruleEXXStar{}}
\ottusedrule{\ottdruleEXXVar{}}
\ottusedrule{\ottdruleEXXPi{}}
\ottusedrule{\ottdruleEXXAbs{}}
\ottusedrule{\ottdruleEXXApp{}}
\ottusedrule{\ottdruleEXXIApp{}}
\ottusedrule{\ottdruleEXXConv{}}
\ottusedrule{\ottdruleEXXCPi{}}
\ottusedrule{\ottdruleEXXCAbs{}}
\ottusedrule{\ottdruleEXXCApp{}}
\ottusedrule{\ottdruleEXXFam{}}
\ottusedrule{\ottdruleEXXPat{}}
\end{ottdefnblock}}

%% defn Iso
\newcommand{\ottdruleEXXPropCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{A_{{\mathrm{1}}}}  \equiv  \ottnt{A_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{B_{{\mathrm{1}}}}  \equiv  \ottnt{B_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{B_{{\mathrm{1}}}}   \equiv   \ottnt{A_{{\mathrm{2}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{B_{{\mathrm{2}}}} }{%
{\ottdrulename{E\_PropCong}}{}%
}}


\newcommand{\ottdruleEXXIsoConv}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{A}  \equiv  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vDash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}}  \, \ \mathsf{ok}}%
\ottpremise{\Gamma  \vDash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{B} / \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}}  \, \ \mathsf{ok}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}}   \equiv   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{B} / \ottnt{R} }  \ottnt{A_{{\mathrm{2}}}} }{%
{\ottdrulename{E\_IsoConv}}{}%
}}


\newcommand{\ottdruleEXXCPiFst}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}   \ottsym{)} . \ottnt{B_{{\mathrm{1}}}}   \equiv   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{b_{{\mathrm{1}}}}   \sim _{ \ottnt{B} / \ottnt{R_{{\mathrm{2}}}} }  \ottnt{b_{{\mathrm{2}}}}   \ottsym{)} . \ottnt{B_{{\mathrm{2}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}   \equiv   \ottnt{b_{{\mathrm{1}}}}   \sim _{ \ottnt{B} / \ottnt{R_{{\mathrm{2}}}} }  \ottnt{b_{{\mathrm{2}}}} }{%
{\ottdrulename{E\_CPiFst}}{}%
}}

\newcommand{\ottdefnIso}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \ottsym{;}  \Delta  \vDash  \phi_{{\mathrm{1}}}  \equiv  \phi_{{\mathrm{2}}}$}{\ottcom{prop equality}}
\ottusedrule{\ottdruleEXXPropCong{}}
\ottusedrule{\ottdruleEXXIsoConv{}}
\ottusedrule{\ottdruleEXXCPiFst{}}
\end{ottdefnblock}}

%% defn DefEq
\newcommand{\ottdruleEXXAssn}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\ottmv{c}  \ottsym{:}  \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{b}   \ottsym{)} \, \in \, \Gamma}%
\ottpremise{\ottmv{c} \, \in \, \Delta}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Assn}}{}%
}}


\newcommand{\ottdruleEXXRefl}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Refl}}{}%
}}


\newcommand{\ottdruleEXXSym}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{b}  \equiv  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Sym}}{}%
}}


\newcommand{\ottdruleEXXTrans}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a_{{\mathrm{1}}}}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Trans}}{}%
}}


\newcommand{\ottdruleEXXSub}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{2}}}}}{%
{\ottdrulename{E\_Sub}}{}%
}}


\newcommand{\ottdruleEXXBeta}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vDash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{a_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R} } }%
\ottpremise{\vDash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{>}  \ottnt{a_{{\mathrm{2}}}}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a_{{\mathrm{1}}}}  \equiv  \ottnt{a_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_Beta}}{}%
}}


\newcommand{\ottdruleEXXPiCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{A_{{\mathrm{1}}}}  \equiv  \ottnt{A_{{\mathrm{2}}}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R}  \ottsym{;}  \Delta  \vDash  \ottnt{B_{{\mathrm{1}}}}  \equiv  \ottnt{B_{{\mathrm{2}}}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A_{{\mathrm{1}}}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R} } }%
\ottpremise{ \suppress{ \Gamma  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'} } }%
\ottpremise{ \suppress{ \Gamma  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'} } }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \ottsym{)}  \equiv  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{)}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_PiCong}}{}%
}}


\newcommand{\ottdruleEXXAbsCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R}  \ottsym{;}  \Delta  \vDash  \ottnt{b_{{\mathrm{1}}}}  \equiv  \ottnt{b_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \ottnt{A_{{\mathrm{1}}}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R} } }%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{b_{{\mathrm{1}}}} ) }%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;  \ottnt{b_{{\mathrm{2}}}} ) }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottsym{(}   \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} . \ottnt{b_{{\mathrm{1}}}}   \ottsym{)}  \equiv  \ottsym{(}   \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} . \ottnt{b_{{\mathrm{2}}}}   \ottsym{)}  \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_AbsCong}}{}%
}}


\newcommand{\ottdruleEXXAppCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a_{{\mathrm{1}}}}  \equiv  \ottnt{b_{{\mathrm{1}}}}  \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a_{{\mathrm{2}}}}  \equiv  \ottnt{b_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a_{{\mathrm{2}}}} ^{ \ottnt{R} , \ottsym{+} }   \equiv   \ottnt{b_{{\mathrm{1}}}} \  \ottnt{b_{{\mathrm{2}}}} ^{ \ottnt{R} , \ottsym{+} }   \ottsym{:}  \ottsym{(}  \ottnt{B}  \ottsym{\{}  \ottnt{a_{{\mathrm{2}}}}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{)}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_AppCong}}{}%
}}


\newcommand{\ottdruleEXXIAppCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a_{{\mathrm{1}}}}  \equiv  \ottnt{b_{{\mathrm{1}}}}  \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a_{{\mathrm{1}}}} \  \Box ^{ \ottnt{R} , \ottsym{-} }   \equiv   \ottnt{b_{{\mathrm{1}}}} \  \Box ^{ \ottnt{R} , \ottsym{-} }   \ottsym{:}  \ottsym{(}  \ottnt{B}  \ottsym{\{}  \ottnt{a}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{)}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_IAppCong}}{}%
}}


\newcommand{\ottdruleEXXPiFst}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \equiv   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{A_{{\mathrm{1}}}}  \equiv  \ottnt{A_{{\mathrm{2}}}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_PiFst}}{}%
}}


\newcommand{\ottdruleEXXPiSnd}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \equiv   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a_{{\mathrm{1}}}}  \equiv  \ottnt{a_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{B_{{\mathrm{1}}}}  \ottsym{\{}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \equiv  \ottnt{B_{{\mathrm{2}}}}  \ottsym{\{}  \ottnt{a_{{\mathrm{2}}}}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_PiSnd}}{}%
}}


\newcommand{\ottdruleEXXCPiCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}   \equiv   \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}} }%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}   \ottsym{;}  \Delta  \vDash  \ottnt{A}  \equiv  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{ \Gamma  \vDash   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  \, \ \mathsf{ok} } }%
\ottpremise{ \suppress{ \Gamma  \vDash   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{A}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'} } }%
\ottpremise{ \suppress{ \Gamma  \vDash   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  . \ottnt{B}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'} } }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{A}   \equiv   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  . \ottnt{B}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_CPiCong}}{}%
}}


\newcommand{\ottdruleEXXCAbsCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi_{{\mathrm{1}}}  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ \suppress{ \Gamma  \vDash  \phi_{{\mathrm{1}}} \, \ \mathsf{ok} } }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{a}   \ottsym{)}  \equiv  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} . \ottnt{b}   \ottsym{)}  \ottsym{:}   \forall \ottmv{c} \!:\! \phi_{{\mathrm{1}}} . \ottnt{B}   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_CAbsCong}}{}%
}}


\newcommand{\ottdruleEXXCAppCong}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a_{{\mathrm{1}}}}  \equiv  \ottnt{b_{{\mathrm{1}}}}  \ottsym{:}  \ottsym{(}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{b}   \ottsym{)} . \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{[}  \bullet  \ottsym{]}  \equiv  \ottnt{b_{{\mathrm{1}}}}  \ottsym{[}  \bullet  \ottsym{]}  \ottsym{:}  \ottsym{(}  \ottnt{B}  \ottsym{\{}  \bullet  \ottsym{/}  \ottmv{c}  \ottsym{\}}  \ottsym{)}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_CAppCong}}{}%
}}


\newcommand{\ottdruleEXXCPiSnd}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}}   \ottsym{)} . \ottnt{B_{{\mathrm{1}}}}   \equiv   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a'_{{\mathrm{1}}}}   \sim _{ \ottnt{A'} / \ottnt{R'} }  \ottnt{a'_{{\mathrm{2}}}}   \ottsym{)} . \ottnt{B_{{\mathrm{2}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{a_{{\mathrm{1}}}}  \equiv  \ottnt{a_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{a'_{{\mathrm{1}}}}  \equiv  \ottnt{a'_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A'}  \ottsym{/}  \ottnt{R'}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{B_{{\mathrm{1}}}}  \ottsym{\{}  \bullet  \ottsym{/}  \ottmv{c}  \ottsym{\}}  \equiv  \ottnt{B_{{\mathrm{2}}}}  \ottsym{\{}  \bullet  \ottsym{/}  \ottmv{c}  \ottsym{\}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}{%
{\ottdrulename{E\_CPiSnd}}{}%
}}


\newcommand{\ottdruleEXXCast}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{b}   \equiv   \ottnt{a'}   \sim _{ \ottnt{A'} / \ottnt{R'} }  \ottnt{b'} }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a'}  \equiv  \ottnt{b'}  \ottsym{:}  \ottnt{A'}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_Cast}}{}%
}}


\newcommand{\ottdruleEXXEqConv}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{A}  \equiv  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottkw{Rep}}%
\ottpremise{\Gamma  \vDash  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_EqConv}}{}%
}}


\newcommand{\ottdruleEXXIsoSnd}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b}   \equiv   \ottnt{a'}   \sim _{ \ottnt{A'} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'} }%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{A}  \equiv  \ottnt{A'}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{E\_IsoSnd}}{}%
}}


\newcommand{\ottdruleEXXPatCong}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a_{{\mathrm{0}}}}  :  \ottnt{A_{{\mathrm{0}}}}  /  \ottnt{R'}  \, \in \,  \Sigma_0 }%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{a'}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{b_{{\mathrm{1}}}}  \equiv  \ottnt{b'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{b_{{\mathrm{2}}}}  \equiv  \ottnt{b'_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a} \, \ottnt{b_{{\mathrm{1}}}} \, \ottnt{b_{{\mathrm{2}}}}  \equiv  \ottkw{ifPath} \, \ottnt{R} \, \ottmv{F} \, \ottnt{a'} \, \ottnt{b'_{{\mathrm{1}}}} \, \ottnt{b'_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}{%
{\ottdrulename{E\_PatCong}}{}%
}}


\newcommand{\ottdruleEXXLeftRel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R'} }\  \ottnt{a}  =  \ottmv{F} }%
\ottpremise{ \mathsf{Path}_{ \ottnt{R'} }\  \ottnt{a'}  =  \ottmv{F} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{b'}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} , \ottsym{+} }   \equiv   \ottnt{a'} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} , \ottsym{+} }   \ottsym{:}  \ottnt{B}  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{B}  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \equiv  \ottnt{B}  \ottsym{\{}  \ottnt{b'}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{a'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_LeftRel}}{}%
}}


\newcommand{\ottdruleEXXLeftIrrel}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R'} }\  \ottnt{a}  =  \ottmv{F} }%
\ottpremise{ \mathsf{Path}_{ \ottnt{R'} }\  \ottnt{a'}  =  \ottmv{F} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{b'}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a} \  \Box ^{ \ottnt{R_{{\mathrm{1}}}} , \ottsym{-} }   \equiv   \ottnt{a'} \  \Box ^{ \ottnt{R_{{\mathrm{1}}}} , \ottsym{-} }   \ottsym{:}  \ottnt{B}  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{B}  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \equiv  \ottnt{B}  \ottsym{\{}  \ottnt{b'}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{a'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_LeftIrrel}}{}%
}}


\newcommand{\ottdruleEXXRight}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R'} }\  \ottnt{a}  =  \ottmv{F} }%
\ottpremise{ \mathsf{Path}_{ \ottnt{R'} }\  \ottnt{a'}  =  \ottmv{F} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}   \mathrm{\Pi}^ \ottsym{+} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} \to \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{b'}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R_{{\mathrm{1}}}} , \ottsym{+} }   \equiv   \ottnt{a'} \  \ottnt{b'} ^{ \ottnt{R_{{\mathrm{1}}}} , \ottsym{+} }   \ottsym{:}  \ottnt{B}  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{B}  \ottsym{\{}  \ottnt{b}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \equiv  \ottnt{B}  \ottsym{\{}  \ottnt{b'}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R_{{\mathrm{0}}}}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{b}  \equiv  \ottnt{b'}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{E\_Right}}{}%
}}


\newcommand{\ottdruleEXXCLeft}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Path}_{ \ottnt{R'} }\  \ottnt{a}  =  \ottmv{F} }%
\ottpremise{ \mathsf{Path}_{ \ottnt{R'} }\  \ottnt{a'}  =  \ottmv{F} }%
\ottpremise{\Gamma  \vDash  \ottnt{a}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}   \ottsym{)} . \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vDash  \ottnt{a'}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}   \ottsym{)} . \ottnt{B}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \ottsym{;}   \widetilde { \Gamma }   \vDash  \ottnt{a_{{\mathrm{1}}}}  \equiv  \ottnt{a_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \ottsym{[}  \bullet  \ottsym{]}  \equiv  \ottnt{a'}  \ottsym{[}  \bullet  \ottsym{]}  \ottsym{:}  \ottnt{B}  \ottsym{\{}  \bullet  \ottsym{/}  \ottmv{c}  \ottsym{\}}  \ottsym{/}  \ottnt{R'}}%
}{
\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{a'}  \ottsym{:}   \forall \ottmv{c} \!:\! \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a_{{\mathrm{2}}}}   \ottsym{)} . \ottnt{B}   \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{E\_CLeft}}{}%
}}

\newcommand{\ottdefnDefEq}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \ottsym{;}  \Delta  \vDash  \ottnt{a}  \equiv  \ottnt{b}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}$}{\ottcom{definitional equality}}
\ottusedrule{\ottdruleEXXAssn{}}
\ottusedrule{\ottdruleEXXRefl{}}
\ottusedrule{\ottdruleEXXSym{}}
\ottusedrule{\ottdruleEXXTrans{}}
\ottusedrule{\ottdruleEXXSub{}}
\ottusedrule{\ottdruleEXXBeta{}}
\ottusedrule{\ottdruleEXXPiCong{}}
\ottusedrule{\ottdruleEXXAbsCong{}}
\ottusedrule{\ottdruleEXXAppCong{}}
\ottusedrule{\ottdruleEXXIAppCong{}}
\ottusedrule{\ottdruleEXXPiFst{}}
\ottusedrule{\ottdruleEXXPiSnd{}}
\ottusedrule{\ottdruleEXXCPiCong{}}
\ottusedrule{\ottdruleEXXCAbsCong{}}
\ottusedrule{\ottdruleEXXCAppCong{}}
\ottusedrule{\ottdruleEXXCPiSnd{}}
\ottusedrule{\ottdruleEXXCast{}}
\ottusedrule{\ottdruleEXXEqConv{}}
\ottusedrule{\ottdruleEXXIsoSnd{}}
\ottusedrule{\ottdruleEXXPatCong{}}
\ottusedrule{\ottdruleEXXLeftRel{}}
\ottusedrule{\ottdruleEXXLeftIrrel{}}
\ottusedrule{\ottdruleEXXRight{}}
\ottusedrule{\ottdruleEXXCLeft{}}
\end{ottdefnblock}}

%% defn Ctx
\newcommand{\ottdruleEXXEmpty}[1]{\ottdrule[#1]{%
}{
\vDash  \varnothing}{%
{\ottdrulename{E\_Empty}}{}%
}}


\newcommand{\ottdruleEXXConsTm}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\Gamma  \vDash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
\ottpremise{\ottmv{x} \, \not\in \, \mathsf{dom} \, \Gamma}%
}{
\vDash  \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{E\_ConsTm}}{}%
}}


\newcommand{\ottdruleEXXConsCo}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Gamma}%
\ottpremise{\Gamma  \vDash  \phi \, \ \mathsf{ok}}%
\ottpremise{\ottmv{c} \, \not\in \, \mathsf{dom} \, \Gamma}%
}{
\vDash  \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi}{%
{\ottdrulename{E\_ConsCo}}{}%
}}

\newcommand{\ottdefnCtx}[1]{\begin{ottdefnblock}[#1]{$\vDash  \Gamma$}{\ottcom{context wellformedness}}
\ottusedrule{\ottdruleEXXEmpty{}}
\ottusedrule{\ottdruleEXXConsTm{}}
\ottusedrule{\ottdruleEXXConsCo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJett}{
\ottdefnPropWff{}\ottdefnTyping{}\ottdefnIso{}\ottdefnDefEq{}\ottdefnCtx{}}

% defns Jsig
%% defn Sig
\newcommand{\ottdruleSigXXEmpty}[1]{\ottdrule[#1]{%
}{
\vDash   \varnothing }{%
{\ottdrulename{Sig\_Empty}}{}%
}}


\newcommand{\ottdruleSigXXConsAx}[1]{\ottdrule[#1]{%
\ottpremise{\vDash  \Sigma}%
\ottpremise{\varnothing  \vDash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\ottmv{F} \, \not\in \, \mathsf{dom} \, \Sigma}%
}{
\vDash   \Sigma  \cup \{ \ottmv{F}  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R'}  \} }{%
{\ottdrulename{Sig\_ConsAx}}{}%
}}

\newcommand{\ottdefnSig}[1]{\begin{ottdefnblock}[#1]{$\vDash  \Sigma$}{\ottcom{signature wellformedness}}
\ottusedrule{\ottdruleSigXXEmpty{}}
\ottusedrule{\ottdruleSigXXConsAx{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJsig}{
\ottdefnSig{}}

% defns Jann
%% defn AnnPropWff
\newcommand{\ottdruleAnXXWff}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vdash  \ottnt{b}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ | \ottnt{A} |_{ \ottnt{R} }   \ottsym{=}   | \ottnt{B} |_{ \ottnt{R} } }%
}{
\Gamma  \vdash   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{b}  \, \ \mathsf{ok}}{%
{\ottdrulename{An\_Wff}}{}%
}}

\newcommand{\ottdefnAnnPropWff}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \phi \, \ \mathsf{ok}$}{\ottcom{prop wellformedness}}
\ottusedrule{\ottdruleAnXXWff{}}
\end{ottdefnblock}}

%% defn AnnTyping
\newcommand{\ottdruleAnXXStar}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
}{
\Gamma  \vdash   \star   \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_Star}}{}%
}}


\newcommand{\ottdruleAnXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R} \, \in \, \Gamma}%
}{
\Gamma  \vdash  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_Var}}{}%
}}


\newcommand{\ottdruleAnXXPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}  \vdash  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{ \Gamma  \vdash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R} } }%
}{
\Gamma  \vdash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{An\_Pi}}{}%
}}


\newcommand{\ottdruleAnXXAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \suppress{ \Gamma  \vdash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R} } }%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;   | \ottnt{a} |_{ \ottnt{R'} }  ) }%
\ottpremise{ \ottnt{R}  \leq  \ottnt{R'} }%
}{
\Gamma  \vdash   \mathrm{\lambda}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} . \ottnt{a}   \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{An\_Abs}}{}%
}}


\newcommand{\ottdruleAnXXApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{b}  \ottsym{:}  \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} \to \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vdash   \ottnt{b} \  \ottnt{a} ^{ \ottnt{R} , \rho }   \ottsym{:}  \ottsym{(}  \ottnt{B}  \ottsym{\{}  \ottnt{a}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{)}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{An\_App}}{}%
}}


\newcommand{\ottdruleAnXXConv}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B} }%
\ottpremise{\Gamma  \vdash  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vdash   \ottnt{a} \triangleright _{ \ottnt{R} }  \gamma   \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_Conv}}{}%
}}


\newcommand{\ottdruleAnXXCPi}[1]{\ottdrule[#1]{%
\ottpremise{ \suppress{ \Gamma  \vdash  \phi \, \ \mathsf{ok} } }%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi  \vdash  \ottnt{B}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vdash   \forall \ottmv{c} \!:\! \phi . \ottnt{B}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_CPi}}{}%
}}


\newcommand{\ottdruleAnXXCAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \suppress{ \Gamma  \vdash  \phi \, \ \mathsf{ok} } }%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vdash   \mathrm{\Lambda} \ottmv{c} \!:\! \phi . \ottnt{a}   \ottsym{:}  \ottsym{(}   \forall \ottmv{c} \!:\! \phi . \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_CAbs}}{}%
}}


\newcommand{\ottdruleAnXXCApp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottsym{(}   \forall \ottmv{c} \!:\!  \ottnt{a}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b}  . \ottnt{B}   \ottsym{)}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R}   \ottnt{b} }%
}{
\Gamma  \vdash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{[}  \gamma  \ottsym{]}  \ottsym{:}  \ottnt{B}  \ottsym{\{}  \gamma  \ottsym{/}  \ottmv{c}  \ottsym{\}}  \ottsym{/}  \ottnt{R'}}{%
{\ottdrulename{An\_CApp}}{}%
}}


\newcommand{\ottdruleAnXXFam}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R}  \, \in \,  \Sigma_1 }%
\ottpremise{\varnothing  \vdash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
}{
\Gamma  \vdash  \ottmv{F}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{An\_Fam}}{}%
}}


\newcommand{\ottdruleAnXXSubRole}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
}{
\Gamma  \vdash  \ottkw{sub} \, \ottnt{R_{{\mathrm{1}}}} \, \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R_{{\mathrm{2}}}}}{%
{\ottdrulename{An\_SubRole}}{}%
}}

\newcommand{\ottdefnAnnTyping}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}$}{\ottcom{typing}}
\ottusedrule{\ottdruleAnXXStar{}}
\ottusedrule{\ottdruleAnXXVar{}}
\ottusedrule{\ottdruleAnXXPi{}}
\ottusedrule{\ottdruleAnXXAbs{}}
\ottusedrule{\ottdruleAnXXApp{}}
\ottusedrule{\ottdruleAnXXConv{}}
\ottusedrule{\ottdruleAnXXCPi{}}
\ottusedrule{\ottdruleAnXXCAbs{}}
\ottusedrule{\ottdruleAnXXCApp{}}
\ottusedrule{\ottdruleAnXXFam{}}
\ottusedrule{\ottdruleAnXXSubRole{}}
\end{ottdefnblock}}

%% defn AnnIso
\newcommand{\ottdruleAnXXPropCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottnt{A_{{\mathrm{1}}}}  \sim_ \ottnt{R}   \ottnt{A_{{\mathrm{2}}}} }%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{2}}}   \ottsym{:}   \ottnt{B_{{\mathrm{1}}}}  \sim_ \ottnt{R}   \ottnt{B_{{\mathrm{2}}}} }%
\ottpremise{\Gamma  \vdash   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{B_{{\mathrm{1}}}}  \, \ \mathsf{ok}}%
\ottpremise{\Gamma  \vdash   \ottnt{A_{{\mathrm{2}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{B_{{\mathrm{2}}}}  \, \ \mathsf{ok}}%
}{
 \Gamma ; \Delta \vdash   \ottsym{(}   \gamma_{{\mathrm{1}}}   \sim _{ \ottnt{A} }  \gamma_{{\mathrm{2}}}   \ottsym{)}  :  \ottsym{(}   \ottnt{A_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{B_{{\mathrm{1}}}}   \ottsym{)}  \sim  \ottsym{(}   \ottnt{A_{{\mathrm{2}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{B_{{\mathrm{2}}}}   \ottsym{)} }{%
{\ottdrulename{An\_PropCong}}{}%
}}


\newcommand{\ottdruleAnXXCPiFst}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}    \forall \ottmv{c} \!:\! \phi_{{\mathrm{1}}} . \ottnt{A_{{\mathrm{2}}}}   \sim_ \ottnt{R}    \forall \ottmv{c} \!:\! \phi_{{\mathrm{2}}} . \ottnt{B_{{\mathrm{2}}}}  }%
}{
 \Gamma ; \Delta \vdash   \ottkw{cpiFst} \, \gamma  :  \phi_{{\mathrm{1}}}  \sim  \phi_{{\mathrm{2}}} }{%
{\ottdrulename{An\_CPiFst}}{}%
}}


\newcommand{\ottdruleAnXXIsoSym}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ; \Delta \vdash   \gamma  :  \phi_{{\mathrm{1}}}  \sim  \phi_{{\mathrm{2}}} }%
}{
 \Gamma ; \Delta \vdash   \ottkw{sym} \, \gamma  :  \phi_{{\mathrm{2}}}  \sim  \phi_{{\mathrm{1}}} }{%
{\ottdrulename{An\_IsoSym}}{}%
}}


\newcommand{\ottdruleAnXXIsoConv}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B} }%
\ottpremise{\Gamma  \vdash   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}}  \, \ \mathsf{ok}}%
\ottpremise{\Gamma  \vdash   \ottnt{a'_{{\mathrm{1}}}}   \sim _{ \ottnt{B} / \ottnt{R} }  \ottnt{a'_{{\mathrm{2}}}}  \, \ \mathsf{ok}}%
\ottpremise{ | \ottnt{a_{{\mathrm{1}}}} |_{ \ottnt{R} }   \ottsym{=}   | \ottnt{a'_{{\mathrm{1}}}} |_{ \ottnt{R} } }%
\ottpremise{ | \ottnt{a_{{\mathrm{2}}}} |_{ \ottnt{R} }   \ottsym{=}   | \ottnt{a'_{{\mathrm{2}}}} |_{ \ottnt{R} } }%
}{
 \Gamma ; \Delta \vdash    \ottkw{conv} \  \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}}   \ottsym{)} \sim_ \gamma   \ottsym{(}   \ottnt{a'_{{\mathrm{1}}}}   \sim _{ \ottnt{B} / \ottnt{R} }  \ottnt{a'_{{\mathrm{2}}}}   \ottsym{)}   :  \ottsym{(}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{a_{{\mathrm{2}}}}   \ottsym{)}  \sim  \ottsym{(}   \ottnt{a'_{{\mathrm{1}}}}   \sim _{ \ottnt{B} / \ottnt{R} }  \ottnt{a'_{{\mathrm{2}}}}   \ottsym{)} }{%
{\ottdrulename{An\_IsoConv}}{}%
}}

\newcommand{\ottdefnAnnIso}[1]{\begin{ottdefnblock}[#1]{$ \Gamma ; \Delta \vdash   \gamma  :  \phi_{{\mathrm{1}}}  \sim  \phi_{{\mathrm{2}}} $}{\ottcom{coercion between props}}
\ottusedrule{\ottdruleAnXXPropCong{}}
\ottusedrule{\ottdruleAnXXCPiFst{}}
\ottusedrule{\ottdruleAnXXIsoSym{}}
\ottusedrule{\ottdruleAnXXIsoConv{}}
\end{ottdefnblock}}

%% defn AnnDefEq
\newcommand{\ottdruleAnXXAssn}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\ottmv{c}  \ottsym{:}   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{b}  \, \in \, \Gamma}%
\ottpremise{\ottmv{c} \, \in \, \Delta}%
}{
 \Gamma ;  \Delta  \vdash  \ottmv{c}   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R}   \ottnt{b} }{%
{\ottdrulename{An\_Assn}}{}%
}}


\newcommand{\ottdruleAnXXRefl}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
}{
 \Gamma ;  \Delta  \vdash  \ottkw{refl} \, \ottnt{a}   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R}   \ottnt{a} }{%
{\ottdrulename{An\_Refl}}{}%
}}


\newcommand{\ottdruleAnXXEraseEq}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vdash  \ottnt{b}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ | \ottnt{a} |_{ \ottnt{R} }   \ottsym{=}   | \ottnt{b} |_{ \ottnt{R} } }%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B} }%
}{
 \Gamma ;  \Delta  \vdash   ( \ottnt{a} \mathrel{|\!\!=\!\!|}_{ \gamma } \ottnt{b} )    \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R}   \ottnt{b} }{%
{\ottdrulename{An\_EraseEq}}{}%
}}


\newcommand{\ottdruleAnXXSym}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{b}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ \suppress{  \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottnt{B}  \sim_ \ottnt{R}   \ottnt{A}  } }%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}   \ottnt{b}  \sim_ \ottnt{R}   \ottnt{a} }%
}{
 \Gamma ;  \Delta  \vdash  \ottkw{sym} \, \gamma   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R}   \ottnt{b} }{%
{\ottdrulename{An\_Sym}}{}%
}}


\newcommand{\ottdruleAnXXTrans}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R}   \ottnt{a_{{\mathrm{1}}}} }%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{2}}}   \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}  \sim_ \ottnt{R}   \ottnt{b} }%
\ottpremise{ \suppress{ \Gamma  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R} } }%
\ottpremise{ \suppress{ \Gamma  \vdash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R} } }%
\ottpremise{ \suppress{  \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{3}}}   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{A_{{\mathrm{1}}}}  } }%
}{
 \Gamma ;  \Delta  \vdash  \ottsym{(}  \gamma_{{\mathrm{1}}}  \ottsym{;}  \gamma_{{\mathrm{2}}}  \ottsym{)}   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R}   \ottnt{b} }{%
{\ottdrulename{An\_Trans}}{}%
}}


\newcommand{\ottdruleAnXXBeta}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{B_{{\mathrm{0}}}}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vdash  \ottnt{a_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ | \ottnt{B_{{\mathrm{0}}}} |_{ \ottnt{R} }   \ottsym{=}   | \ottnt{B_{{\mathrm{1}}}} |_{ \ottnt{R} } }%
\ottpremise{\vDash   | \ottnt{a_{{\mathrm{1}}}} |_{ \ottnt{R} }   \ottsym{>}   | \ottnt{a_{{\mathrm{2}}}} |_{ \ottnt{R} }   \ottsym{/}  \ottnt{R}}%
}{
 \Gamma ;  \Delta  \vdash  \ottkw{red} \, \ottnt{a_{{\mathrm{1}}}} \, \ottnt{a_{{\mathrm{2}}}}   \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}  \sim_ \ottnt{R}   \ottnt{a_{{\mathrm{2}}}} }{%
{\ottdrulename{An\_Beta}}{}%
}}


\newcommand{\ottdruleAnXXPiCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottnt{A_{{\mathrm{1}}}}  \sim_ \ottnt{R'}   \ottnt{A_{{\mathrm{2}}}} }%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R} ;  \Delta  \vdash  \gamma_{{\mathrm{2}}}   \ottsym{:}   \ottnt{B_{{\mathrm{1}}}}  \sim_ \ottnt{R'}     \ottnt{B_{{\mathrm{2}}}}   }%
\ottpremise{\ottnt{B_{{\mathrm{3}}}}  \ottsym{=}  \ottnt{B_{{\mathrm{2}}}}  \ottsym{\{}   \ottmv{x} \triangleright _{ \ottnt{R'} }  \ottkw{sym} \, \gamma_{{\mathrm{1}}}   \ottsym{/}  \ottmv{x}  \ottsym{\}}}%
\ottpremise{\Gamma  \vdash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vdash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vdash   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{3}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{  \ottnt{R}  \leq  \ottnt{R'}  } }%
}{
 \Gamma ;  \Delta  \vdash   \mathrm{\Pi}^{ \ottnt{R} , \rho } \ottmv{x} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{2}}}    \ottsym{:}   \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \ottsym{)}  \sim_ \ottnt{R'}   \ottsym{(}   \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{3}}}}   \ottsym{)} }{%
{\ottdrulename{An\_PiCong}}{}%
}}


\newcommand{\ottdruleAnXXAbsCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottnt{A_{{\mathrm{1}}}}  \sim_ \ottnt{R}   \ottnt{A_{{\mathrm{2}}}} }%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R} ;  \Delta  \vdash  \gamma_{{\mathrm{2}}}   \ottsym{:}   \ottnt{b_{{\mathrm{1}}}}  \sim_ \ottnt{R'}     \ottnt{b_{{\mathrm{2}}}}   }%
\ottpremise{\ottnt{b_{{\mathrm{3}}}}  \ottsym{=}  \ottnt{b_{{\mathrm{2}}}}  \ottsym{\{}   \ottmv{x} \triangleright _{ \ottnt{R'} }  \ottkw{sym} \, \gamma_{{\mathrm{1}}}   \ottsym{/}  \ottmv{x}  \ottsym{\}}}%
\ottpremise{ \suppress{ \Gamma  \vdash  \ottnt{A_{{\mathrm{1}}}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R} } }%
\ottpremise{\Gamma  \vdash  \ottnt{A_{{\mathrm{2}}}}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;   | \ottnt{b_{{\mathrm{1}}}} |_{ \ottnt{R'} }  ) }%
\ottpremise{ ( \rho  = +) \vee ( \ottmv{x} \not\in\mathsf{fv}\;   | \ottnt{b_{{\mathrm{3}}}} |_{ \ottnt{R'} }  ) }%
\ottpremise{ \suppress{ \Gamma  \vdash  \ottsym{(}   \mathrm{\lambda}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} . \ottnt{b_{{\mathrm{2}}}}   \ottsym{)}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R'} } }%
\ottpremise{ \suppress{  \ottnt{R}  \leq  \ottnt{R'}  } }%
}{
 \Gamma ;  \Delta  \vdash  \ottsym{(}   \mathrm{\lambda}^{ \ottnt{R} , \rho } \ottmv{x} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{2}}}   \ottsym{)}   \ottsym{:}   \ottsym{(}   \mathrm{\lambda}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} . \ottnt{b_{{\mathrm{1}}}}   \ottsym{)}  \sim_ \ottnt{R'}   \ottsym{(}   \mathrm{\lambda}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} . \ottnt{b_{{\mathrm{3}}}}   \ottsym{)} }{%
{\ottdrulename{An\_AbsCong}}{}%
}}


\newcommand{\ottdruleAnXXAppCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}  \sim_ \ottnt{R'}   \ottnt{b_{{\mathrm{1}}}} }%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{2}}}   \ottsym{:}   \ottnt{a_{{\mathrm{2}}}}  \sim_ \ottnt{R}   \ottnt{b_{{\mathrm{2}}}} }%
\ottpremise{\Gamma  \vdash   \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a_{{\mathrm{2}}}} ^{ \ottnt{R} , \rho }   \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vdash   \ottnt{b_{{\mathrm{1}}}} \  \ottnt{b_{{\mathrm{2}}}} ^{ \ottnt{R} , \rho }   \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{  \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{3}}}   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R'}   \ottnt{B}  } }%
}{
 \Gamma ;  \Delta  \vdash   \gamma_{{\mathrm{1}}} \  \gamma_{{\mathrm{2}}} ^{ \ottnt{R} , \rho }    \ottsym{:}    \ottnt{a_{{\mathrm{1}}}} \  \ottnt{a_{{\mathrm{2}}}} ^{ \ottnt{R} , \rho }   \sim_ \ottnt{R'}    \ottnt{b_{{\mathrm{1}}}} \  \ottnt{b_{{\mathrm{2}}}} ^{ \ottnt{R} , \rho }  }{%
{\ottdrulename{An\_AppCong}}{}%
}}


\newcommand{\ottdruleAnXXPiFst}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}    \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \sim_ \ottnt{R'}    \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}  }%
}{
 \Gamma ;  \Delta  \vdash  \ottkw{piFst} \, \gamma   \ottsym{:}   \ottnt{A_{{\mathrm{1}}}}  \sim_ \ottnt{R}   \ottnt{A_{{\mathrm{2}}}} }{%
{\ottdrulename{An\_PiFst}}{}%
}}


\newcommand{\ottdruleAnXXPiSnd}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}    \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \sim_ \ottnt{R'}    \mathrm{\Pi}^ \rho \ottmv{x} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}  }%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{2}}}   \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}  \sim_ \ottnt{R}   \ottnt{a_{{\mathrm{2}}}} }%
\ottpremise{\Gamma  \vdash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vdash  \ottnt{a_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{A_{{\mathrm{2}}}}  \ottsym{/}  \ottnt{R}}%
}{
 \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}  \ottsym{@}  \gamma_{{\mathrm{2}}}   \ottsym{:}    \ottnt{B_{{\mathrm{1}}}}  \ottsym{\{}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{/}  \ottmv{x}  \ottsym{\}}   \sim_ \ottnt{R'}    \ottnt{B_{{\mathrm{2}}}}  \ottsym{\{}  \ottnt{a_{{\mathrm{2}}}}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  }{%
{\ottdrulename{An\_PiSnd}}{}%
}}


\newcommand{\ottdruleAnXXCPiCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ; \Delta \vdash   \gamma_{{\mathrm{1}}}  :   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}   \sim   \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  }%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  ;  \Delta  \vdash  \gamma_{{\mathrm{3}}}   \ottsym{:}   \ottnt{B_{{\mathrm{1}}}}  \sim_ \ottnt{R'}     \ottnt{B_{{\mathrm{2}}}}   }%
\ottpremise{\ottnt{B_{{\mathrm{3}}}}  \ottsym{=}  \ottnt{B_{{\mathrm{2}}}}  \ottsym{\{}   \ottmv{c}   \triangleright _{ \ottnt{R'} }  \ottkw{sym} \, \gamma_{{\mathrm{1}}}   \ottsym{/}  \ottmv{c}  \ottsym{\}}}%
\ottpremise{\Gamma  \vdash   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{B_{{\mathrm{1}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \suppress{ \Gamma  \vdash   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  . \ottnt{B_{{\mathrm{3}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'} } }%
\ottpremise{\Gamma  \vdash   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{B_{{\mathrm{2}}}}   \ottsym{:}   \star   \ottsym{/}  \ottnt{R'}}%
}{
 \Gamma ;  \Delta  \vdash  \ottsym{(}   \forall \ottmv{c} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{3}}}   \ottsym{)}   \ottsym{:}   \ottsym{(}   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{B_{{\mathrm{1}}}}   \ottsym{)}  \sim_ \ottnt{R}   \ottsym{(}   \forall \ottmv{c} \!:\!  \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  . \ottnt{B_{{\mathrm{3}}}}   \ottsym{)} }{%
{\ottdrulename{An\_CPiCong}}{}%
}}


\newcommand{\ottdruleAnXXCAbsCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ; \Delta \vdash   \gamma_{{\mathrm{1}}}  :   \ottnt{b_{{\mathrm{0}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}   \sim   \ottnt{b_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{3}}}}  }%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}   \ottnt{b_{{\mathrm{0}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  ;  \Delta  \vdash  \gamma_{{\mathrm{3}}}   \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}  \sim_ \ottnt{R'}     \ottnt{a_{{\mathrm{2}}}}   }%
\ottpremise{\ottnt{a_{{\mathrm{3}}}}  \ottsym{=}  \ottnt{a_{{\mathrm{2}}}}  \ottsym{\{}   \ottmv{c}   \triangleright _{ \ottnt{R'} }  \ottkw{sym} \, \gamma_{{\mathrm{1}}}   \ottsym{/}  \ottmv{c}  \ottsym{\}}}%
\ottpremise{\Gamma  \vdash  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} \!:\!  \ottnt{b_{{\mathrm{0}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{a_{{\mathrm{1}}}}   \ottsym{)}  \ottsym{:}   \forall \ottmv{c} \!:\!  \ottnt{b_{{\mathrm{0}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{B_{{\mathrm{1}}}}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vdash  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} \!:\!  \ottnt{b_{{\mathrm{0}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{a_{{\mathrm{2}}}}   \ottsym{)}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R'}}%
\ottpremise{\Gamma  \vdash  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} \!:\!  \ottnt{b_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{3}}}}  . \ottnt{a_{{\mathrm{3}}}}   \ottsym{)}  \ottsym{:}   \forall \ottmv{c} \!:\!  \ottnt{b_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{3}}}}  . \ottnt{B_{{\mathrm{2}}}}   \ottsym{/}  \ottnt{R'}}%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{4}}}   \ottsym{:}    \forall \ottmv{c} \!:\!  \ottnt{b_{{\mathrm{0}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{B_{{\mathrm{1}}}}   \sim_ \ottnt{R'}    \forall \ottmv{c} \!:\! \phi_{{\mathrm{2}}} . \ottnt{B_{{\mathrm{2}}}}  }%
}{
 \Gamma ;  \Delta  \vdash  \ottsym{(}   \mathrm{\lambda} \ottmv{c} \!:\! \gamma_{{\mathrm{1}}} . \gamma_{{\mathrm{3}}} \ottsym{@} \gamma_{{\mathrm{4}}}   \ottsym{)}   \ottsym{:}   \ottsym{(}   \mathrm{\Lambda} \ottmv{c} \!:\!  \ottnt{b_{{\mathrm{0}}}}   \sim _{ \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{a_{{\mathrm{1}}}}   \ottsym{)}  \sim_ \ottnt{R'}   \ottsym{(}   \mathrm{\Lambda} \ottmv{c} \!:\!  \ottnt{b_{{\mathrm{2}}}}   \sim _{ \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{3}}}}  . \ottnt{a_{{\mathrm{3}}}}   \ottsym{)} }{%
{\ottdrulename{An\_CAbsCong}}{}%
}}


\newcommand{\ottdruleAnXXCAppCong}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}  \sim_ \ottnt{R}   \ottnt{b_{{\mathrm{1}}}} }%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{2}}}   \ottsym{:}   \ottnt{a_{{\mathrm{2}}}}  \sim_ \ottnt{R'}   \ottnt{b_{{\mathrm{2}}}} }%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{3}}}   \ottsym{:}   \ottnt{a_{{\mathrm{3}}}}  \sim_ \ottnt{R'}   \ottnt{b_{{\mathrm{3}}}} }%
\ottpremise{\Gamma  \vdash  \ottnt{a_{{\mathrm{1}}}}  \ottsym{[}  \gamma_{{\mathrm{2}}}  \ottsym{]}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \vdash  \ottnt{b_{{\mathrm{1}}}}  \ottsym{[}  \gamma_{{\mathrm{3}}}  \ottsym{]}  \ottsym{:}  \ottnt{B}  \ottsym{/}  \ottnt{R}}%
\ottpremise{ \suppress{  \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{4}}}   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B}  } }%
}{
 \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}  \ottsym{(}  \gamma_{{\mathrm{2}}}  \ottsym{,}  \gamma_{{\mathrm{3}}}  \ottsym{)}   \ottsym{:}   \ottnt{a_{{\mathrm{1}}}}  \ottsym{[}  \gamma_{{\mathrm{2}}}  \ottsym{]}  \sim_ \ottnt{R}   \ottnt{b_{{\mathrm{1}}}}  \ottsym{[}  \gamma_{{\mathrm{3}}}  \ottsym{]} }{%
{\ottdrulename{An\_CAppCong}}{}%
}}


\newcommand{\ottdruleAnXXCPiSnd}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottsym{(}   \forall \ottmv{c_{{\mathrm{1}}}} \!:\!  \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{a'}  . \ottnt{B_{{\mathrm{1}}}}   \ottsym{)}  \sim_ \ottnt{R_{{\mathrm{0}}}}   \ottsym{(}   \forall \ottmv{c_{{\mathrm{2}}}} \!:\!  \ottnt{b}   \sim _{ \ottnt{B} / \ottnt{R'} }  \ottnt{b'}  . \ottnt{B_{{\mathrm{2}}}}   \ottsym{)} }%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{2}}}   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R}   \ottnt{a'} }%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma_{{\mathrm{3}}}   \ottsym{:}   \ottnt{b}  \sim_ \ottnt{R'}   \ottnt{b'} }%
}{
 \Gamma ;  \Delta  \vdash   \gamma_{{\mathrm{1}}}   \ottsym{@}  ( \gamma_{{\mathrm{2}}}  \sim  \gamma_{{\mathrm{3}}} )    \ottsym{:}   \ottnt{B_{{\mathrm{1}}}}  \ottsym{\{}  \gamma_{{\mathrm{2}}}  \ottsym{/}  \ottmv{c_{{\mathrm{1}}}}  \ottsym{\}}  \sim_ \ottnt{R_{{\mathrm{0}}}}   \ottnt{B_{{\mathrm{2}}}}  \ottsym{\{}  \gamma_{{\mathrm{3}}}  \ottsym{/}  \ottmv{c_{{\mathrm{2}}}}  \ottsym{\}} }{%
{\ottdrulename{An\_CPiSnd}}{}%
}}


\newcommand{\ottdruleAnXXCast}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma_{{\mathrm{1}}}   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R_{{\mathrm{1}}}}   \ottnt{a'} }%
\ottpremise{ \Gamma ; \Delta \vdash   \gamma_{{\mathrm{2}}}  :   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{a'}   \sim   \ottnt{b}   \sim _{ \ottnt{B} / \ottnt{R_{{\mathrm{1}}}} }  \ottnt{b'}  }%
}{
 \Gamma ;  \Delta  \vdash   \gamma_{{\mathrm{1}}}   \triangleright _{ \ottnt{R_{{\mathrm{1}}}} }  \gamma_{{\mathrm{2}}}    \ottsym{:}   \ottnt{b}  \sim_ \ottnt{R_{{\mathrm{1}}}}   \ottnt{b'} }{%
{\ottdrulename{An\_Cast}}{}%
}}


\newcommand{\ottdruleAnXXIsoSnd}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ; \Delta \vdash   \gamma  :  \ottsym{(}   \ottnt{a}   \sim _{ \ottnt{A} / \ottnt{R} }  \ottnt{a'}   \ottsym{)}  \sim  \ottsym{(}   \ottnt{b}   \sim _{ \ottnt{B} / \ottnt{R} }  \ottnt{b'}   \ottsym{)} }%
}{
 \Gamma ;  \Delta  \vdash  \ottkw{isoSnd} \, \gamma   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B} }{%
{\ottdrulename{An\_IsoSnd}}{}%
}}


\newcommand{\ottdruleAnXXSub}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R_{{\mathrm{1}}}}   \ottnt{b} }%
\ottpremise{ \ottnt{R_{{\mathrm{1}}}}  \leq  \ottnt{R_{{\mathrm{2}}}} }%
}{
 \Gamma ;  \Delta  \vdash  \ottkw{sub} \, \gamma   \ottsym{:}   \ottnt{a}  \sim_ \ottnt{R_{{\mathrm{2}}}}   \ottnt{b} }{%
{\ottdrulename{An\_Sub}}{}%
}}

\newcommand{\ottdefnAnnDefEq}[1]{\begin{ottdefnblock}[#1]{$ \Gamma ;  \Delta  \vdash  \gamma   \ottsym{:}   \ottnt{A}  \sim_ \ottnt{R}   \ottnt{B} $}{\ottcom{coercion between types}}
\ottusedrule{\ottdruleAnXXAssn{}}
\ottusedrule{\ottdruleAnXXRefl{}}
\ottusedrule{\ottdruleAnXXEraseEq{}}
\ottusedrule{\ottdruleAnXXSym{}}
\ottusedrule{\ottdruleAnXXTrans{}}
\ottusedrule{\ottdruleAnXXBeta{}}
\ottusedrule{\ottdruleAnXXPiCong{}}
\ottusedrule{\ottdruleAnXXAbsCong{}}
\ottusedrule{\ottdruleAnXXAppCong{}}
\ottusedrule{\ottdruleAnXXPiFst{}}
\ottusedrule{\ottdruleAnXXPiSnd{}}
\ottusedrule{\ottdruleAnXXCPiCong{}}
\ottusedrule{\ottdruleAnXXCAbsCong{}}
\ottusedrule{\ottdruleAnXXCAppCong{}}
\ottusedrule{\ottdruleAnXXCPiSnd{}}
\ottusedrule{\ottdruleAnXXCast{}}
\ottusedrule{\ottdruleAnXXIsoSnd{}}
\ottusedrule{\ottdruleAnXXSub{}}
\end{ottdefnblock}}

%% defn AnnCtx
\newcommand{\ottdruleAnXXEmpty}[1]{\ottdrule[#1]{%
}{
\vdash  \varnothing}{%
{\ottdrulename{An\_Empty}}{}%
}}


\newcommand{\ottdruleAnXXConsTm}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\Gamma  \vdash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
\ottpremise{\ottmv{x} \, \not\in \, \mathsf{dom} \, \Gamma}%
}{
\vdash  \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_ConsTm}}{}%
}}


\newcommand{\ottdruleAnXXConsCo}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma}%
\ottpremise{\Gamma  \vdash  \phi \, \ \mathsf{ok}}%
\ottpremise{\ottmv{c} \, \not\in \, \mathsf{dom} \, \Gamma}%
}{
\vdash  \Gamma  \ottsym{,}  \ottmv{c}  \ottsym{:}  \phi}{%
{\ottdrulename{An\_ConsCo}}{}%
}}

\newcommand{\ottdefnAnnCtx}[1]{\begin{ottdefnblock}[#1]{$\vdash  \Gamma$}{\ottcom{context wellformedness}}
\ottusedrule{\ottdruleAnXXEmpty{}}
\ottusedrule{\ottdruleAnXXConsTm{}}
\ottusedrule{\ottdruleAnXXConsCo{}}
\end{ottdefnblock}}

%% defn AnnSig
\newcommand{\ottdruleAnXXSigXXEmpty}[1]{\ottdrule[#1]{%
}{
\vdash   \varnothing }{%
{\ottdrulename{An\_Sig\_Empty}}{}%
}}


\newcommand{\ottdruleAnXXSigXXConsAx}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Sigma}%
\ottpremise{\varnothing  \vdash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
\ottpremise{\varnothing  \vdash  \ottnt{a}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}}%
\ottpremise{\ottmv{F} \, \not\in \, \mathsf{dom} \, \Sigma}%
}{
\vdash   \Sigma  \cup \{ \ottmv{F}  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R}  \} }{%
{\ottdrulename{An\_Sig\_ConsAx}}{}%
}}

\newcommand{\ottdefnAnnSig}[1]{\begin{ottdefnblock}[#1]{$\vdash  \Sigma$}{\ottcom{signature wellformedness}}
\ottusedrule{\ottdruleAnXXSigXXEmpty{}}
\ottusedrule{\ottdruleAnXXSigXXConsAx{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJann}{
\ottdefnAnnPropWff{}\ottdefnAnnTyping{}\ottdefnAnnIso{}\ottdefnAnnDefEq{}\ottdefnAnnCtx{}\ottdefnAnnSig{}}

% defns Jred
%% defn head_reduction
\newcommand{\ottdruleAnXXAppLeft}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
}{
\Gamma  \vdash   \ottnt{a} \  \ottnt{b} ^{ \ottnt{R} , \rho }   \leadsto   \ottnt{a'} \  \ottnt{b} ^{ \ottnt{R} , \rho }   \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{An\_AppLeft}}{}%
}}


\newcommand{\ottdruleAnXXAppAbs}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottsym{(}   \mathrm{\lambda}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} . \ottnt{w}   \ottsym{)} }%
}{
\Gamma  \vdash   \ottsym{(}   \mathrm{\lambda}^ \rho \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} . \ottnt{w}   \ottsym{)} \  \ottnt{a} ^{ \ottnt{R} , \rho }   \leadsto  \ottnt{w}  \ottsym{\{}  \ottnt{a}  \ottsym{/}  \ottmv{x}  \ottsym{\}}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_AppAbs}}{}%
}}


\newcommand{\ottdruleAnXXCAppLeft}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vdash  \ottnt{a}  \ottsym{[}  \gamma  \ottsym{]}  \leadsto  \ottnt{a'}  \ottsym{[}  \gamma  \ottsym{]}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_CAppLeft}}{}%
}}


\newcommand{\ottdruleAnXXCAppCAbs}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottsym{(}   \mathrm{\Lambda} \ottmv{c} \!:\! \phi . \ottnt{b}   \ottsym{)}  \ottsym{[}  \gamma  \ottsym{]}  \leadsto  \ottnt{b}  \ottsym{\{}  \gamma  \ottsym{/}  \ottmv{c}  \ottsym{\}}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_CAppCAbs}}{}%
}}


\newcommand{\ottdruleAnXXAbsTerm}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{A}  \ottsym{:}   \star   \ottsym{/}  \ottnt{R}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{/}  \ottnt{R}  \vdash  \ottnt{b}  \leadsto  \ottnt{b'}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}%
}{
\Gamma  \vdash  \ottsym{(}   \mathrm{\lambda}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} . \ottnt{b}   \ottsym{)}  \leadsto  \ottsym{(}   \mathrm{\lambda}^ \ottsym{-} \ottmv{x} \!:\! \ottnt{A} / \ottnt{R} . \ottnt{b'}   \ottsym{)}  \ottsym{/}  \ottnt{R_{{\mathrm{1}}}}}{%
{\ottdrulename{An\_AbsTerm}}{}%
}}


\newcommand{\ottdruleAnXXAxiom}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{F} \,  \sim  \ottnt{a}  :  \ottnt{A}  /  \ottnt{R}  \, \in \,  \Sigma_1 }%
}{
\Gamma  \vdash  \ottmv{F}  \leadsto  \ottnt{a}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_Axiom}}{}%
}}


\newcommand{\ottdruleAnXXConvTerm}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{a}  \leadsto  \ottnt{a'}  \ottsym{/}  \ottnt{R}}%
}{
\Gamma  \vdash   \ottnt{a} \triangleright _{ \ottnt{R_{{\mathrm{1}}}} }  \gamma   \leadsto   \ottnt{a'} \triangleright _{ \ottnt{R_{{\mathrm{1}}}} }  \gamma   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_ConvTerm}}{}%
}}


\newcommand{\ottdruleAnXXCombine}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{v} }%
}{
\Gamma  \vdash   \ottsym{(}   \ottnt{v} \triangleright _{ \ottnt{R_{{\mathrm{2}}}} }  \gamma_{{\mathrm{1}}}   \ottsym{)} \triangleright _{ \ottnt{R_{{\mathrm{2}}}} }  \gamma_{{\mathrm{2}}}   \leadsto   \ottnt{v} \triangleright _{ \ottnt{R_{{\mathrm{2}}}} }  \ottsym{(}  \gamma_{{\mathrm{1}}}  \ottsym{;}  \gamma_{{\mathrm{2}}}  \ottsym{)}   \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_Combine}}{}%
}}


\newcommand{\ottdruleAnXXPush}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{v} }%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma   \ottsym{:}    \mathrm{\Pi}^ \rho \ottmv{x_{{\mathrm{1}}}} \!:\! \ottnt{A_{{\mathrm{1}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{1}}}}   \sim_ \ottnt{R'}    \mathrm{\Pi}^ \rho \ottmv{x_{{\mathrm{2}}}} \!:\! \ottnt{A_{{\mathrm{2}}}} / \ottnt{R} \to \ottnt{B_{{\mathrm{2}}}}  }%
\ottpremise{\ottnt{b'}  \ottsym{=}   \ottnt{b} \triangleright _{ \ottnt{R'} }  \ottkw{sym} \, \ottsym{(}  \ottkw{piFst} \, \gamma  \ottsym{)} }%
\ottpremise{\gamma'  \ottsym{=}  \gamma  \ottsym{@}   ( \ottnt{b'} \mathrel{|\!\!=\!\!|}_{ \ottsym{(}  \ottkw{piFst} \, \gamma  \ottsym{)} } \ottnt{b} ) }%
}{
\Gamma  \vdash   \ottsym{(}   \ottnt{v} \triangleright _{ \ottnt{R'} }  \gamma   \ottsym{)} \  \ottnt{b} ^{ \ottnt{R} , \rho }   \leadsto  \ottsym{(}   \ottsym{(}   \ottnt{v} \  \ottnt{b'} ^{ \ottnt{R} , \rho }   \ottsym{)} \triangleright _{ \ottnt{R'} }  \gamma'   \ottsym{)}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_Push}}{}%
}}


\newcommand{\ottdruleAnXXCPush}[1]{\ottdrule[#1]{%
\ottpremise{ \mathsf{Value}_{ \ottnt{R} }\  \ottnt{v} }%
\ottpremise{ \Gamma ;   \widetilde { \Gamma }   \vdash  \gamma   \ottsym{:}    \forall \ottmv{c_{{\mathrm{1}}}} \!:\!  \ottnt{a_{{\mathrm{1}}}}   \sim _{ \ottnt{B_{{\mathrm{1}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{1}}}}  . \ottnt{A_{{\mathrm{1}}}}   \sim_ \ottnt{R'}    \forall \ottmv{c_{{\mathrm{2}}}} \!:\!  \ottnt{a_{{\mathrm{2}}}}   \sim _{ \ottnt{B_{{\mathrm{2}}}} / \ottnt{R} }  \ottnt{b_{{\mathrm{2}}}}  . \ottnt{A_{{\mathrm{2}}}}  }%
\ottpremise{\gamma'_{{\mathrm{1}}}  \ottsym{=}   \gamma_{{\mathrm{1}}}   \triangleright _{ \ottnt{R'} }  \ottkw{sym} \, \ottsym{(}  \ottkw{cpiFst} \, \gamma  \ottsym{)} }%
\ottpremise{\gamma'  \ottsym{=}   \gamma   \ottsym{@}  ( \gamma'_{{\mathrm{1}}}  \sim  \gamma_{{\mathrm{1}}} ) }%
}{
\Gamma  \vdash  \ottsym{(}   \ottnt{v} \triangleright _{ \ottnt{R'} }  \gamma   \ottsym{)}  \ottsym{[}  \gamma_{{\mathrm{1}}}  \ottsym{]}  \leadsto  \ottsym{(}   \ottsym{(}  \ottnt{v}  \ottsym{[}  \gamma'_{{\mathrm{1}}}  \ottsym{]}  \ottsym{)} \triangleright _{ \ottnt{R'} }  \gamma'   \ottsym{)}  \ottsym{/}  \ottnt{R}}{%
{\ottdrulename{An\_CPush}}{}%
}}

\newcommand{\ottdefnheadXXreduction}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{a}  \leadsto  \ottnt{b}  \ottsym{/}  \ottnt{R}$}{\ottcom{single-step, weak head reduction to
   values for annotated language}}
\ottusedrule{\ottdruleAnXXAppLeft{}}
\ottusedrule{\ottdruleAnXXAppAbs{}}
\ottusedrule{\ottdruleAnXXCAppLeft{}}
\ottusedrule{\ottdruleAnXXCAppCAbs{}}
\ottusedrule{\ottdruleAnXXAbsTerm{}}
\ottusedrule{\ottdruleAnXXAxiom{}}
\ottusedrule{\ottdruleAnXXConvTerm{}}
\ottusedrule{\ottdruleAnXXCombine{}}
\ottusedrule{\ottdruleAnXXPush{}}
\ottusedrule{\ottdruleAnXXCPush{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJred}{
\ottdefnheadXXreduction{}}

\newcommand{\ottdefnss}{
\ottdefnsJSubRole
\ottdefnsJPath
\ottdefnsJValue
\ottdefnsJValueType
\ottdefnsJconsistent
\ottdefnsJerased
\ottdefnsJChk
\ottdefnsJpar
\ottdefnsJbeta
\ottdefnsJett
\ottdefnsJsig
\ottdefnsJann
\ottdefnsJred
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        162 good    0 bad
Definition rule clauses: 517 good    0 bad
\end{verbatim}
\end{document}
